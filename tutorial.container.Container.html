<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>tutorial.container.Container</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library tutorial.container.Container</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab609"></a><h1 class="section">Container.v</h1>

 *
<a name="lab610"></a><h1 class="section">Primitives to initialize and manage containers.</h1>

 
<div class="paragraph"> </div>

 Compcert helper lib 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Coqlib.html#"><span class="id" title="library">Coqlib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Maps.html#"><span class="id" title="library">Maps</span></a>.<br/>
</div>

<div class="doc">
Compcert types and semantics 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.AST.html#"><span class="id" title="library">AST</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Integers.html#"><span class="id" title="library">Integers</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Values.html#"><span class="id" title="library">Values</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Globalenvs.html#"><span class="id" title="library">Globalenvs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Clight.html#"><span class="id" title="library">Clight</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#"><span class="id" title="library">Ctypes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Cop.html#"><span class="id" title="library">Cop</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Smallstep.html#"><span class="id" title="library">Smallstep</span></a>.<br/>
</div>

<div class="doc">
CertiKOS layer library 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.Semantics.html#"><span class="id" title="library">Semantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.Structures.html#"><span class="id" title="library">Structures</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.GenSem.html#"><span class="id" title="library">GenSem</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.CGenSem.html#"><span class="id" title="library">CGenSem</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.CPrimitives.html#"><span class="id" title="library">CPrimitives</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.SimulationRelation.html#"><span class="id" title="library">SimulationRelation</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#"><span class="id" title="library">SimrelInvariant</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.LayerLogicImpl.html#"><span class="id" title="library">LayerLogicImpl</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.ClightModules.html#"><span class="id" title="library">ClightModules</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#"><span class="id" title="library">ClightXSemantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.AbstractData.html#"><span class="id" title="library">AbstractData</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#"><span class="id" title="library">AbstractionRelation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.common.TutoLib.html#"><span class="id" title="library">TutoLib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.container.ContainerType.html#"><span class="id" title="library">ContainerType</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.container.ContainerIntro.html#"><span class="id" title="library">ContainerIntro</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this file we will implement primitives to <span class="inlinecode"><a class="idref" href="compcert.backend.Locations.html#Locmap.init"><span class="id" title="definition">init</span></a></span> the root container,
  check if a container <span class="inlinecode"><span class="id" title="var">can_consume</span></span> more memory, <span class="inlinecode"><a class="idref" href="compcert.common.Memtype.html#Mem.alloc"><span class="id" title="projection">alloc</span></a></span> more memory, and
  <span class="inlinecode"><span class="id" title="tactic">split</span></span> a container to create a child. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="container_init"><span class="id" title="definition">container_init</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 25%<span class="id" title="var">positive</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="container_can_consume"><span class="id" title="definition">container_can_consume</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 26%<span class="id" title="var">positive</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="container_alloc"><span class="id" title="definition">container_alloc</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 27%<span class="id" title="var">positive</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="container_split"><span class="id" title="definition">container_split</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 28%<span class="id" title="var">positive</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Container"><span class="id" title="section">Container</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmem</span>: <a class="idref" href="liblayers.simrel.MemWithData.html#BaseMemoryModel"><span class="id" title="class">BaseMemoryModel</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="class">MakeProgramSpec.MakeProgram</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab611"></a><h2 class="section">Abstract Data</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.AbsData"><span class="id" title="section">AbsData</span></a>.<br/>

<br/>
</div>

<div class="doc">
At this layer we now require that all of the containers are valid. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="container_data_inv"><span class="id" title="record">container_data_inv</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="tutorial.container.ContainerType.html#container_data"><span class="id" title="record">container_data</span></a>) : <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="valid_inv"><span class="id" title="projection">valid_inv</span></a>: <a class="idref" href="tutorial.container.ContainerType.html#container_valid"><span class="id" title="record">container_valid</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="preinit_inv"><span class="id" title="projection">preinit_inv</span></a>: <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.lib.Maps.html#ZMap.init"><span class="id" title="definition">ZMap.init</span></a> <a class="idref" href="tutorial.container.ContainerType.html#container_unused"><span class="id" title="definition">container_unused</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="container_data_ops"><span class="id" title="instance">container_data_ops</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#AbstractDataOps"><span class="id" title="class">AbstractDataOps</span></a> <a class="idref" href="tutorial.container.ContainerType.html#container_data"><span class="id" title="record">container_data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">init_data</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">container_data_init</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">data_inv</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">container_data_inv</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">data_inject</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <span class="id" title="keyword">fun</span> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">⇒</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="container_data_data"><span class="id" title="instance">container_data_data</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#AbstractData"><span class="id" title="class">AbstractData</span></a> <a class="idref" href="tutorial.container.ContainerType.html#container_data"><span class="id" title="record">container_data</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.container.ContainerType.html#container_unused_valid"><span class="id" title="lemma">container_unused_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_layerdata"><span class="id" title="definition">container_layerdata</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#layerdata"><span class="id" title="record">layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_type</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">container_data</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_ops</span></a>  <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">container_data_ops</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_prf</span></a>  <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">container_data_data</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.AbsData"><span class="id" title="section">AbsData</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab612"></a><h2 class="section">High Level Specifications</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.HighSpec"><span class="id" title="section">HighSpec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="compcert.backend.Locations.html#Locmap.init"><span class="id" title="definition">init</span></a></span> sets the <span class="inlinecode"><a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a></span> to true, and sets the container pool to its
      initial value. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_init_high_spec"><span class="id" title="definition">container_init_high_spec</span></a> (<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> {| <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">init_flag</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">true</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">cpool</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">container_pool_init</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_init_high_sem"><span class="id" title="definition">container_init_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_high_spec"><span class="id" title="definition">container_init_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_init_layer"><span class="id" title="definition">container_init_layer</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_init"><span class="id" title="definition">container_init</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_high_sem"><span class="id" title="definition">container_init_high_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_init_pres_inv"><span class="id" title="instance">container_init_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_high_spec"><span class="id" title="definition">container_init_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? <span class="id" title="var">Hsem</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_init_high_spec"><span class="id" title="definition">container_init_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_in</span> <span class="id" title="var">H3</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.container.ContainerType.html#container_init_valid"><span class="id" title="lemma">container_init_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">can_consume</span></span> checks whether the difference between <span class="inlinecode"><a class="idref" href="tutorial.container.Container.html#quota"><span class="id" title="variable">quota</span></a></span> and <span class="inlinecode"><a class="idref" href="tutorial.container.ContainerIntro.html#usage"><span class="id" title="variable">usage</span></a></span>
      is at least <span class="inlinecode"><a class="idref" href="compcert.lib.Coqlib.html#n"><span class="id" title="variable">n</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a> (<span class="id" title="var">id</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">n</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#NUM_ID"><span class="id" title="definition">NUM_ID</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.max_unsigned"><span class="id" title="definition">Int.max_unsigned</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">if</span> <a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="tutorial.container.Container.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_can_consume_high_sem"><span class="id" title="definition">container_can_consume_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_can_consume_layer"><span class="id" title="definition">container_can_consume_layer</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_can_consume"><span class="id" title="definition">container_can_consume</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_sem"><span class="id" title="definition">container_can_consume_high_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_can_consume_pres_inv"><span class="id" title="instance">container_can_consume_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? <span class="id" title="var">Hsem</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">Hsem</span>. <span class="id" title="var">inv_monad</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="compcert.common.Memtype.html#Mem.alloc"><span class="id" title="projection">alloc</span></a></span> increments the usage by 1. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a> (<span class="id" title="var">id</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#NUM_ID"><span class="id" title="definition">NUM_ID</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.max_unsigned"><span class="id" title="definition">Int.max_unsigned</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">if</span> <a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">c'</span> := <a class="idref" href="tutorial.container.ContainerType.html#mkContainer"><span class="id" title="constructor">mkContainer</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) (<a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> 1) (<a class="idref" href="tutorial.container.ContainerType.html#cparent"><span class="id" title="projection">cparent</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="tutorial.container.ContainerType.html#cchildren"><span class="id" title="projection">cchildren</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) (<a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#273beba4f3453dbb29192b3ac740bb71"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">({|</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">init_flag</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">init_flag</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">abs</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">cpool</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">ZMap.set</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">id</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">c'</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">(</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">cpool</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">abs</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">|},</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_alloc_high_sem"><span class="id" title="definition">container_alloc_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_alloc_layer"><span class="id" title="definition">container_alloc_layer</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_alloc"><span class="id" title="definition">container_alloc</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_sem"><span class="id" title="definition">container_alloc_high_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_alloc_pres_inv"><span class="id" title="instance">container_alloc_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? <span class="id" title="var">Hsem</span> ? <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">Hinv</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; [| <span class="id" title="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb1</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.container.ContainerType.html#container_alloc_valid"><span class="id" title="lemma">container_alloc_valid</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">split</span></span> creates a new child container with a given <span class="inlinecode"><a class="idref" href="tutorial.container.Container.html#quota"><span class="id" title="variable">quota</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a> (<span class="id" title="var">id</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">quota</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">chid</span> := <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#88e34ed7a73f02772126289867960764"><span class="id" title="notation">×</span></a> <a class="idref" href="tutorial.container.ContainerType.html#MAX_CHILDREN"><span class="id" title="definition">MAX_CHILDREN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cchildren"><span class="id" title="projection">cchildren</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>)) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cchildren"><span class="id" title="projection">cchildren</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#273beba4f3453dbb29192b3ac740bb71"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#MAX_CHILDREN"><span class="id" title="definition">MAX_CHILDREN</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#0ae6347154955be5e4fdfa755ff4a025"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#0ae6347154955be5e4fdfa755ff4a025"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.container.ContainerType.html#NUM_ID"><span class="id" title="definition">NUM_ID</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.Container.html#quota"><span class="id" title="variable">quota</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#239a40728d107295b3cb2c790f57f9e9"><span class="id" title="notation">-</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#5dda7752d319ac2ccefb830f12787952"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.max_unsigned"><span class="id" title="definition">Int.max_unsigned</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">match</span> <a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>, <a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">child</span> := <a class="idref" href="tutorial.container.ContainerType.html#mkContainer"><span class="id" title="constructor">mkContainer</span></a> <a class="idref" href="tutorial.container.Container.html#quota"><span class="id" title="variable">quota</span></a> 0 <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c'</span> := <a class="idref" href="tutorial.container.ContainerType.html#mkContainer"><span class="id" title="constructor">mkContainer</span></a> (<a class="idref" href="tutorial.container.ContainerType.html#cquota"><span class="id" title="projection">cquota</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) (<a class="idref" href="tutorial.container.ContainerType.html#cusage"><span class="id" title="projection">cusage</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="tutorial.container.Container.html#quota"><span class="id" title="variable">quota</span></a>) (<a class="idref" href="tutorial.container.ContainerType.html#cparent"><span class="id" title="projection">cparent</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cchildren"><span class="id" title="projection">cchildren</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) (<a class="idref" href="tutorial.container.ContainerType.html#cused"><span class="id" title="projection">cused</span></a> <a class="idref" href="tutorial.container.Container.html#c"><span class="id" title="variable">c</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">({|</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">init_flag</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">init_flag</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">abs</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">cpool</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">:=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">ZMap.set</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">id</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">c'</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">(</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">ZMap.set</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">chid</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">child</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">(</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">cpool</span></a> <a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">abs</span></a><a class="idref" href="tutorial.container.ContainerType.html#Build_container_data"><span class="id" title="constructor">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">|},</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_split_high_sem"><span class="id" title="definition">container_split_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_split_layer"><span class="id" title="definition">container_split_layer</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_split"><span class="id" title="definition">container_split</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_high_sem"><span class="id" title="definition">container_split_high_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_split_pres_inv"><span class="id" title="instance">container_split_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? <span class="id" title="var">Hsem</span> ? <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; [| <span class="id" title="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqb0</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.container.ContainerType.html#container_split_valid"><span class="id" title="lemma">container_split_valid</span></a>; (<span class="id" title="tactic">auto</span> || <span class="id" title="tactic">omega</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.HighSpec"><span class="id" title="section">HighSpec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab613"></a><h2 class="section">Module Implementation</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.Code"><span class="id" title="section">Code</span></a>.<br/>

<br/>
</div>

<div class="doc">
TUTORIAL: Replace the following four <span class="inlinecode"><span class="id" title="keyword">Axiom</span></span>s with <span class="inlinecode"><span class="id" title="keyword">Definition</span></span>s of
        Clight functions from container.c and uncomment the Program Definitions.
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="f_container_init"><span class="id" title="axiom">f_container_init</span></a> : <a class="idref" href="compcert.cfrontend.Clight.html#function"><span class="id" title="record">Clight.function</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ccc_id"><span class="id" title="definition">ccc_id</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 29%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ccc_n"><span class="id" title="definition">ccc_n</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 30%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ccc_quota"><span class="id" title="definition">ccc_quota</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 31%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ccc_usage"><span class="id" title="definition">ccc_usage</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 32%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ccc_ret"><span class="id" title="definition">ccc_ret</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 33%<span class="id" title="var">positive</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="f_container_can_consume"><span class="id" title="axiom">f_container_can_consume</span></a> : <a class="idref" href="compcert.cfrontend.Clight.html#function"><span class="id" title="record">Clight.function</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ca_id"><span class="id" title="definition">ca_id</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 34%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ca_quota"><span class="id" title="definition">ca_quota</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 35%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ca_usage"><span class="id" title="definition">ca_usage</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 36%<span class="id" title="var">positive</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="f_container_alloc"><span class="id" title="axiom">f_container_alloc</span></a> : <a class="idref" href="compcert.cfrontend.Clight.html#function"><span class="id" title="record">Clight.function</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cs_id"><span class="id" title="definition">cs_id</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 37%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cs_quota"><span class="id" title="definition">cs_quota</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 38%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cs_nchildren"><span class="id" title="definition">cs_nchildren</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 39%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cs_usage"><span class="id" title="definition">cs_usage</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 40%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cs_child_id"><span class="id" title="definition">cs_child_id</span></a> : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> := 41%<span class="id" title="var">positive</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="f_container_split"><span class="id" title="axiom">f_container_split</span></a> : <a class="idref" href="compcert.cfrontend.Clight.html#function"><span class="id" title="record">Clight.function</span></a>.<br/>

<br/>

<br/>
</div>

<div class="doc">
TUTORIAL: Define mappings for init, can_consume, alloc, and split 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="Minit"><span class="id" title="axiom">Minit</span></a> : <a class="idref" href="liblayers.compcertx.ClightModules.html#cmodule"><span class="id" title="abbreviation">cmodule</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="Mconsume"><span class="id" title="axiom">Mconsume</span></a> : <a class="idref" href="liblayers.compcertx.ClightModules.html#cmodule"><span class="id" title="abbreviation">cmodule</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="Malloc"><span class="id" title="axiom">Malloc</span></a> : <a class="idref" href="liblayers.compcertx.ClightModules.html#cmodule"><span class="id" title="abbreviation">cmodule</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a name="Msplit"><span class="id" title="axiom">Msplit</span></a> : <a class="idref" href="liblayers.compcertx.ClightModules.html#cmodule"><span class="id" title="abbreviation">cmodule</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.Code"><span class="id" title="section">Code</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab614"></a><h2 class="section">Low Level Specifications</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.LowSpec"><span class="id" title="section">LowSpec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_init_csig"><span class="id" title="definition">container_init_csig</span></a> := <a class="idref" href="liblayers.compcertx.CompcertStructures.html#mkcsig"><span class="id" title="definition">mkcsig</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Tnil"><span class="id" title="constructor">Ctypes.Tnil</span></a> <a class="idref" href="tutorial.common.TutoLib.html#tvoid"><span class="id" title="abbreviation">tvoid</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="container_init_step"><span class="id" title="inductive">container_init_step</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#csignature"><span class="id" title="record">csignature</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="container_init_step_into"><span class="id" title="constructor">container_init_step_into</span></a> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">d1</span> <span class="id" title="var">d'</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#boot_init_high_spec"><span class="id" title="definition">boot_init_high_spec</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.container.Container.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_node_init_high_spec"><span class="id" title="definition">container_node_init_high_spec</span></a> 0 <a class="idref" href="tutorial.container.ContainerType.html#ROOT_QUOTA"><span class="id" title="definition">ROOT_QUOTA</span></a> 0 <a class="idref" href="tutorial.container.Container.html#d1"><span class="id" title="variable">d1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_init_step"><span class="id" title="inductive">container_init_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_csig"><span class="id" title="definition">container_init_csig</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vundef"><span class="id" title="constructor">Vundef</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_init_cprimitive"><span class="id" title="definition">container_init_cprimitive</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">mkcprim_tac</span> <a class="idref" href="tutorial.container.Container.html#container_init_step"><span class="id" title="inductive">container_init_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_csig"><span class="id" title="definition">container_init_csig</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_init_cprim_pres_inv"><span class="id" title="instance">container_init_cprim_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_cprimitive"><span class="id" title="definition">container_init_cprimitive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.ContainerIntro.html#container_node_init_high_spec"><span class="id" title="definition">container_node_init_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_can_consume_csig"><span class="id" title="definition">container_can_consume_csig</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#mkcsig"><span class="id" title="definition">mkcsig</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#type_of_list_type"><span class="id" title="definition">type_of_list_type</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)) <a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="container_can_consume_step"><span class="id" title="inductive">container_can_consume_step</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#csignature"><span class="id" title="record">csignature</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="container_can_consume_step_into"><span class="id" title="constructor">container_can_consume_step_into</span></a> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">id</span> <span class="id" title="var">n</span> <span class="id" title="var">ret</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <a class="idref" href="tutorial.container.Container.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tutorial.container.Container.html#ret"><span class="id" title="variable">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_can_consume_step"><span class="id" title="inductive">container_can_consume_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_csig"><span class="id" title="definition">container_can_consume_csig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="tutorial.container.Container.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.repr"><span class="id" title="definition">Int.repr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.b2z"><span class="id" title="definition">Z.b2z</span></a> <a class="idref" href="tutorial.container.Container.html#ret"><span class="id" title="variable">ret</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_can_consume_cprimitive"><span class="id" title="definition">container_can_consume_cprimitive</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">mkcprim_tac</span> <a class="idref" href="tutorial.container.Container.html#container_can_consume_step"><span class="id" title="inductive">container_can_consume_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_csig"><span class="id" title="definition">container_can_consume_csig</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_can_consume_cprim_pres_inv"><span class="id" title="instance">container_can_consume_cprim_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_cprimitive"><span class="id" title="definition">container_can_consume_cprimitive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_alloc_csig"><span class="id" title="definition">container_alloc_csig</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#mkcsig"><span class="id" title="definition">mkcsig</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#type_of_list_type"><span class="id" title="definition">type_of_list_type</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)) <a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="container_alloc_step"><span class="id" title="inductive">container_alloc_step</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#csignature"><span class="id" title="record">csignature</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="container_alloc_step_into"><span class="id" title="constructor">container_alloc_step_into</span></a> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">id</span> <span class="id" title="var">ret</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a>) <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#ret"><span class="id" title="variable">ret</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_alloc_step"><span class="id" title="inductive">container_alloc_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_csig"><span class="id" title="definition">container_alloc_csig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.repr"><span class="id" title="definition">Int.repr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.b2z"><span class="id" title="definition">Z.b2z</span></a> <a class="idref" href="tutorial.container.Container.html#ret"><span class="id" title="variable">ret</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_alloc_cprimitive"><span class="id" title="definition">container_alloc_cprimitive</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">mkcprim_tac</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_step"><span class="id" title="inductive">container_alloc_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_csig"><span class="id" title="definition">container_alloc_csig</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_alloc_cprim_pres_inv"><span class="id" title="instance">container_alloc_cprim_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_cprimitive"><span class="id" title="definition">container_alloc_cprimitive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_split_csig"><span class="id" title="definition">container_split_csig</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#mkcsig"><span class="id" title="definition">mkcsig</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#type_of_list_type"><span class="id" title="definition">type_of_list_type</span></a> (<a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)) <a class="idref" href="tutorial.common.TutoLib.html#tuint"><span class="id" title="abbreviation">tuint</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="container_split_step"><span class="id" title="inductive">container_split_step</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CompcertStructures.html#csignature"><span class="id" title="record">csignature</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Values.html#val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mwd"><span class="id" title="definition">mwd</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="container_split_step_into"><span class="id" title="constructor">container_split_step_into</span></a> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> <span class="id" title="var">id</span> <span class="id" title="var">q</span> <span class="id" title="var">chid</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <a class="idref" href="tutorial.container.Container.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_split_step"><span class="id" title="inductive">container_split_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_csig"><span class="id" title="definition">container_split_csig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="tutorial.container.Container.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="tutorial.container.Container.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.common.Values.html#Vint"><span class="id" title="constructor">Vint</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.repr"><span class="id" title="definition">Int.repr</span></a> <a class="idref" href="tutorial.container.Container.html#chid"><span class="id" title="variable">chid</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#d'"><span class="id" title="variable">d'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_split_cprimitive"><span class="id" title="definition">container_split_cprimitive</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">mkcprim_tac</span> <a class="idref" href="tutorial.container.Container.html#container_split_step"><span class="id" title="inductive">container_split_step</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_csig"><span class="id" title="definition">container_split_csig</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="container_split_cprim_pres_inv"><span class="id" title="instance">container_split_cprim_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_cprimitive"><span class="id" title="definition">container_split_cprimitive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>. <span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.LowSpec"><span class="id" title="section">LowSpec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab615"></a><h2 class="section">Code Proofs</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.CodeLowSpecSim"><span class="id" title="section">CodeLowSpecSim</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ce</span>: <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#ClightCompositeEnv"><span class="id" title="class">ClightCompositeEnv</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Container.CodeLowSpecSim.Hce"><span class="id" title="variable">Hce</span></a> : <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> (<a class="idref" href="tutorial.container.ContainerIntro.html#t_container_comp"><span class="id" title="definition">t_container_comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="tutorial.container.Container.html#Container.CodeLowSpecSim.ce"><span class="id" title="variable">ce</span></a>.<br/>

<br/>
</div>

<div class="doc">
TUTORIAL: Uncomment these proofs and remove the Admitteds. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_init_code"><span class="id" title="lemma">container_init_code</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_L"><span class="id" title="definition">container_intro_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="method">id</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#Minit"><span class="id" title="axiom">Minit</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_init"><span class="id" title="definition">container_init</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_cprimitive"><span class="id" title="definition">container_init_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_can_consume_code"><span class="id" title="lemma">container_can_consume_code</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_L"><span class="id" title="definition">container_intro_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="method">id</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#Mconsume"><span class="id" title="axiom">Mconsume</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_can_consume"><span class="id" title="definition">container_can_consume</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_cprimitive"><span class="id" title="definition">container_can_consume_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_alloc_code"><span class="id" title="lemma">container_alloc_code</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_L"><span class="id" title="definition">container_intro_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="method">id</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#Malloc"><span class="id" title="axiom">Malloc</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_alloc"><span class="id" title="definition">container_alloc</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_cprimitive"><span class="id" title="definition">container_alloc_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_split_code"><span class="id" title="lemma">container_split_code</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_L"><span class="id" title="definition">container_intro_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="method">id</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#Msplit"><span class="id" title="axiom">Msplit</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_split"><span class="id" title="definition">container_split</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_cprimitive"><span class="id" title="definition">container_split_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.CodeLowSpecSim"><span class="id" title="section">CodeLowSpecSim</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab616"></a><h2 class="section">Layer Relation</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.LowHighSpecRel"><span class="id" title="section">LowHighSpecRel</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="match_data"><span class="id" title="inductive">match_data</span></a> : <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mem"><span class="id" title="method">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="match_data_intro"><span class="id" title="constructor">match_data_intro</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> (<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#match_data"><span class="id" title="inductive">match_data</span></a> <a class="idref" href="tutorial.container.Container.html#abs"><span class="id" title="variable">abs</span></a> <a class="idref" href="tutorial.container.Container.html#m"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="relate_data"><span class="id" title="record">relate_data</span></a> (<span class="id" title="var">hadt</span>: <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a>) (<span class="id" title="var">ladt</span>: <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="mkrelate_data"><span class="id" title="constructor">mkrelate_data</span></a> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="init_rel"><span class="id" title="projection">init_rel</span></a>: <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#hadt"><span class="id" title="variable">hadt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.container.Container.html#ladt"><span class="id" title="variable">ladt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="cpool_rel"><span class="id" title="projection">cpool_rel</span></a>: <a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#hadt"><span class="id" title="variable">hadt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.container.ContainerType.html#cpool"><span class="id" title="projection">cpool</span></a> <a class="idref" href="tutorial.container.Container.html#ladt"><span class="id" title="variable">ladt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abrel_components_container_container_intro"><span class="id" title="definition">abrel_components_container_container_intro</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel_components"><span class="id" title="record">abrel_components</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_relate</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">relate_data</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_match</span></a>  <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">match_data</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_new_glbl</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="rel_ops"><span class="id" title="instance">rel_ops</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#AbstractionRelation"><span class="id" title="class">AbstractionRelation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="tutorial.container.Container.html#abrel_components_container_container_intro"><span class="id" title="definition">abrel_components_container_container_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span> <span class="id" title="var">Hunchange</span> <span class="id" title="var">Hmatch1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">Hmatch1</span>; <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">decision</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abrel_container_container_intro"><span class="id" title="definition">abrel_container_container_intro</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel"><span class="id" title="record">abrel</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_ops</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_components_container_container_intro</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_prf</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">rel_ops</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_R"><span class="id" title="definition">container_R</span></a> : <a class="idref" href="liblayers.simrel.SimrelDefinition.html#simrel"><span class="id" title="record">simrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel_simrel"><span class="id" title="definition">abrel_simrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="tutorial.container.Container.html#abrel_container_container_intro"><span class="id" title="definition">abrel_container_container_intro</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.LowHighSpecRel"><span class="id" title="section">LowHighSpecRel</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab617"></a><h2 class="section">Refinement Proofs</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.LowHighSpecSim"><span class="id" title="section">LowHighSpecSim</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ce</span>: <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#ClightCompositeEnv"><span class="id" title="class">ClightCompositeEnv</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Container.LowHighSpecSim.Hce"><span class="id" title="variable">Hce</span></a> : <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> (<a class="idref" href="tutorial.container.ContainerIntro.html#t_container_comp"><span class="id" title="definition">t_container_comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="tutorial.container.Container.html#Container.LowHighSpecSim.ce"><span class="id" title="variable">ce</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_init_refine"><span class="id" title="lemma">container_init_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_init"><span class="id" title="definition">container_init</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_cprimitive"><span class="id" title="definition">container_init_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_layer"><span class="id" title="definition">container_init_layer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">refine_proof_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CStep</span>. <span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse_hyps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">InvHi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MemRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_relate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_init_high_spec"><span class="id" title="definition">container_init_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.ContainerIntro.html#container_node_init_high_spec"><span class="id" title="definition">container_node_init_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <a class="idref" href="tutorial.container.ContainerType.html#NUM_ID_range"><span class="id" title="lemma">NUM_ID_range</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hnid_range</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr</span>; (<span class="id" title="tactic">auto</span> || <span class="id" title="tactic">intuition</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">preinit_inv0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_can_consume_refine"><span class="id" title="lemma">container_can_consume_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_can_consume"><span class="id" title="definition">container_can_consume</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_cprimitive"><span class="id" title="definition">container_can_consume_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_layer"><span class="id" title="definition">container_can_consume_layer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">refine_proof_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CStep</span>. <span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">H8</span>. <span class="id" title="var">inv_monad</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse_hyps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MemRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_relate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 4 (<span class="id" title="var">destr_in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>). <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hquo_usg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
usage + n &lt;= quota 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hquo_n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_usg</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
usage + n &gt; quota 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hquo_n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_can_consume_high_spec"><span class="id" title="definition">container_can_consume_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_usg</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_alloc_refine"><span class="id" title="lemma">container_alloc_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_alloc"><span class="id" title="definition">container_alloc</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_cprimitive"><span class="id" title="definition">container_alloc_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_layer"><span class="id" title="definition">container_alloc_layer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">refine_proof_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CStep</span>. <span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">H8</span>. <span class="id" title="var">inv_monad</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse_hyps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MemRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_relate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hi</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hquo_usg</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinit</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hused</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
usage &lt; quota 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs1</span> <span class="id" title="var">into</span> <span class="id" title="var">Husg_quo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_usg</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Husg_quo</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">abrel_match_mem_perms</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">abrel_match_mem_nextblock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">abrel_match_mem_nextblock</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
usage &gt;= quota 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs1</span> <span class="id" title="var">into</span> <span class="id" title="var">Husg_quo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_alloc_high_spec"><span class="id" title="definition">container_alloc_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hquo_usg</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Husg_quo</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_split_refine"><span class="id" title="lemma">container_split_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_split"><span class="id" title="definition">container_split</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_cprimitive"><span class="id" title="definition">container_split_cprimitive</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_layer"><span class="id" title="definition">container_split_layer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">refine_proof_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CStep</span>. <span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse_hyps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MemRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_relate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destr_in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hnch</span> &amp; <span class="id" title="var">Hchid</span> &amp; <span class="id" title="var">Hq</span> &amp; <span class="id" title="var">Husg</span> &amp; <span class="id" title="var">Hquo</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hranges</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinit</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hused</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hchused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_split_high_spec"><span class="id" title="definition">container_split_high_spec</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">cpool_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hranges</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hused</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hchused</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Integers.html#Int.repr_unsigned"><span class="id" title="lemma">Int.repr_unsigned</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.LowHighSpecSim"><span class="id" title="section">LowHighSpecSim</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab618"></a><h2 class="section">Linking</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Container.Linking"><span class="id" title="section">Linking</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ce</span>: <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#ClightCompositeEnv"><span class="id" title="class">ClightCompositeEnv</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Container.Linking.Hce"><span class="id" title="variable">Hce</span></a> : <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> (<a class="idref" href="tutorial.container.ContainerIntro.html#t_container_comp"><span class="id" title="definition">t_container_comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="tutorial.container.Container.html#Container.Linking.ce"><span class="id" title="variable">ce</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_L"><span class="id" title="definition">container_L</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.Container.html#container_layerdata"><span class="id" title="definition">container_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_init_layer"><span class="id" title="definition">container_init_layer</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_layer"><span class="id" title="definition">container_can_consume_layer</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_layer"><span class="id" title="definition">container_alloc_layer</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_layer"><span class="id" title="definition">container_split_layer</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="a19cd8f42ca690d417837efd8ec16cc7"><span class="id" title="definition">container_Σ</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_layerdata"><span class="id" title="definition">container_intro_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#container_init"><span class="id" title="definition">container_init</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_init_cprimitive"><span class="id" title="definition">container_init_cprimitive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume"><span class="id" title="definition">container_can_consume</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_can_consume_cprimitive"><span class="id" title="definition">container_can_consume_cprimitive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc"><span class="id" title="definition">container_alloc</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_alloc_cprimitive"><span class="id" title="definition">container_alloc_cprimitive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_split"><span class="id" title="definition">container_split</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.container.Container.html#container_split_cprimitive"><span class="id" title="definition">container_split_cprimitive</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="container_M"><span class="id" title="definition">container_M</span></a> : <a class="idref" href="liblayers.compcertx.ClightModules.html#cmodule"><span class="id" title="abbreviation">cmodule</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.Container.html#Minit"><span class="id" title="axiom">Minit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#Mconsume"><span class="id" title="axiom">Mconsume</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#Malloc"><span class="id" title="axiom">Malloc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#Msplit"><span class="id" title="axiom">Msplit</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">container_init_code</span> <span class="id" title="var">container_init_refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">container_can_consume_code</span> <span class="id" title="var">container_can_consume_refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">container_alloc_code</span> <span class="id" title="var">container_alloc_refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">container_split_code</span> <span class="id" title="var">container_split_refine</span> : <span class="id" title="var">linking</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">container_intro_pres_inv</span> : <span class="id" title="var">linking</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="container_link"><span class="id" title="lemma">container_link</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_L"><span class="id" title="definition">container_intro_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.Container.html#container_M"><span class="id" title="definition">container_M</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_L"><span class="id" title="definition">container_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">link_tac</span> <a class="idref" href="tutorial.container.Container.html#a19cd8f42ca690d417837efd8ec16cc7"><span class="id" title="definition">container_Σ</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="container_pres_inv"><span class="id" title="lemma">container_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Layers.html#ForallPrimitive"><span class="id" title="class">ForallPrimitive</span></a> <span class="id" title="var">_</span> (<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <span class="id" title="var">_</span>) <a class="idref" href="tutorial.container.Container.html#container_L"><span class="id" title="definition">container_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.container.Container.html#container_L"><span class="id" title="definition">container_L</span></a>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">container_intro_link</span> <span class="id" title="var">container_link</span> : <span class="id" title="var">linking</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="container_container_intro_link"><span class="id" title="lemma">container_container_intro_link</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.container.ContainerIntro.html#boot_L"><span class="id" title="definition">boot_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_R"><span class="id" title="definition">container_intro_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_M"><span class="id" title="definition">container_intro_M</span></a> <a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.container.Container.html#container_M"><span class="id" title="definition">container_M</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.container.Container.html#container_L"><span class="id" title="definition">container_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="liblayers.logic.Language.html#vdash_rel_equiv"><span class="id" title="method">vdash_rel_equiv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="tutorial.container.ContainerIntro.html#container_intro_R"><span class="id" title="definition">container_intro_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.container.Container.html#container_R"><span class="id" title="definition">container_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="liblayers.logic.LayerData.html#cat_compose_assoc"><span class="id" title="method">cat_compose_assoc</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="liblayers.logic.LayerData.html#cat_compose_assoc"><span class="id" title="method">cat_compose_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.logic.Language.html#vcomp_rule"><span class="id" title="method">vcomp_rule</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">linking</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container.Linking"><span class="id" title="section">Linking</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.container.Container.html#Container"><span class="id" title="section">Container</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>