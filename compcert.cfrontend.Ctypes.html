<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>compcert.cfrontend.Ctypes</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library compcert.cfrontend.Ctypes</h1>

<div class="code">

<br/>
</div>

<div class="doc">
Type expressions for the Compcert C and Clight languages 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Axioms</span> <a class="idref" href="compcert.lib.Coqlib.html#"><span class="id" title="library">Coqlib</span></a> <a class="idref" href="compcert.lib.Maps.html#"><span class="id" title="library">Maps</span></a> <a class="idref" href="compcert.common.Errors.html#"><span class="id" title="library">Errors</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.AST.html#"><span class="id" title="library">AST</span></a> <a class="idref" href="compcert.common.Linking.html#"><span class="id" title="library">Linking</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="compcert.x86_64.Archi.html#"><span class="id" title="library">Archi</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab169"></a><h1 class="section">Syntax of types</h1>

<div class="paragraph"> </div>

 Compcert C types are similar to those of C.  They include numeric types,
  pointers, arrays, function types, and composite types (struct and
  union).  Numeric types (integers and floats) fully specify the
  bit size of the type.  An integer type is a pair of a signed/unsigned
  flag and a bit size: 8, 16, or 32 bits, or the special <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a></span> size
  standing for the C99 <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Cop.html#ArithConv._Bool"><span class="id" title="constructor">_Bool</span></a></span> type.  64-bit integers are treated separately. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="signedness"><span class="id" title="inductive">signedness</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Signed"><span class="id" title="constructor">Signed</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#signedness"><span class="id" title="inductive">signedness</span></a><br/>
&nbsp;&nbsp;| <a name="Unsigned"><span class="id" title="constructor">Unsigned</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#signedness"><span class="id" title="inductive">signedness</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="intsize"><span class="id" title="inductive">intsize</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="I8"><span class="id" title="constructor">I8</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a><br/>
&nbsp;&nbsp;| <a name="I16"><span class="id" title="constructor">I16</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a><br/>
&nbsp;&nbsp;| <a name="I32"><span class="id" title="constructor">I32</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a><br/>
&nbsp;&nbsp;| <a name="IBool"><span class="id" title="constructor">IBool</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a>.<br/>

<br/>
</div>

<div class="doc">
Float types come in two sizes: 32 bits (single precision)
  and 64-bit (double precision). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="floatsize"><span class="id" title="inductive">floatsize</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="F32"><span class="id" title="constructor">F32</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#floatsize"><span class="id" title="inductive">floatsize</span></a><br/>
&nbsp;&nbsp;| <a name="F64"><span class="id" title="constructor">F64</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#floatsize"><span class="id" title="inductive">floatsize</span></a>.<br/>

<br/>
</div>

<div class="doc">
Every type carries a set of attributes.  Currently, only two
  attributes are modeled: <span class="inlinecode"><span class="id" title="var">volatile</span></span> and <span class="inlinecode"><span class="id" title="var">_Alignas</span>(<a class="idref" href="compcert.lib.Coqlib.html#n"><span class="id" title="variable">n</span></a>)</span> (from ISO C 2011). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a name="attr"><span class="id" title="record">attr</span></a> : <span class="id" title="keyword">Type</span> := <a name="mk_attr"><span class="id" title="constructor">mk_attr</span></a> {<br/>
&nbsp;&nbsp;<a name="attr_volatile"><span class="id" title="projection">attr_volatile</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>;<br/>
&nbsp;&nbsp;<a name="attr_alignas"><span class="id" title="projection">attr_alignas</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>         <br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="noattr"><span class="id" title="definition">noattr</span></a> := {| <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_volatile</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">false</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_alignas</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">None</span></a> |}.<br/>

<br/>
</div>

<div class="doc">
The syntax of type expressions.  Some points to note:
<ul class="doclist">
<li> Array types <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.lib.Coqlib.html#n"><span class="id" title="variable">n</span></a></span> carry the size <span class="inlinecode"><a class="idref" href="compcert.lib.Coqlib.html#n"><span class="id" title="variable">n</span></a></span> of the array.
  Arrays with unknown sizes are represented by pointer types.

</li>
<li> Function types <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.common.Events.html#targs"><span class="id" title="variable">targs</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#tres"><span class="id" title="variable">tres</span></a></span> specify the number and types
  of the function arguments (list <span class="inlinecode"><a class="idref" href="compcert.common.Events.html#targs"><span class="id" title="variable">targs</span></a></span>), and the type of the
  function result (<span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#tres"><span class="id" title="variable">tres</span></a></span>).  Variadic functions and old-style unprototyped
  functions are not supported.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="type"><span class="id" title="inductive">type</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Tvoid"><span class="id" title="constructor">Tvoid</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>                                    <br/>
&nbsp;&nbsp;| <a name="Tint"><span class="id" title="constructor">Tint</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#signedness"><span class="id" title="inductive">signedness</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>    <br/>
&nbsp;&nbsp;| <a name="Tlong"><span class="id" title="constructor">Tlong</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#signedness"><span class="id" title="inductive">signedness</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>              <br/>
&nbsp;&nbsp;| <a name="Tfloat"><span class="id" title="constructor">Tfloat</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#floatsize"><span class="id" title="inductive">floatsize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>              <br/>
&nbsp;&nbsp;| <a name="Tpointer"><span class="id" title="constructor">Tpointer</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>                 <br/>
&nbsp;&nbsp;| <a name="Tarray"><span class="id" title="constructor">Tarray</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>              <br/>
&nbsp;&nbsp;| <a name="Tfunction"><span class="id" title="constructor">Tfunction</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.AST.html#calling_convention"><span class="id" title="record">calling_convention</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>    <br/>
&nbsp;&nbsp;| <a name="Tstruct"><span class="id" title="constructor">Tstruct</span></a>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>                 <br/>
&nbsp;&nbsp;| <a name="Tunion"><span class="id" title="constructor">Tunion</span></a>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>                  <br/>
<span class="id" title="keyword">with</span> <a name="typelist"><span class="id" title="inductive">typelist</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Tnil"><span class="id" title="constructor">Tnil</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a><br/>
&nbsp;&nbsp;| <a name="Tcons"><span class="id" title="constructor">Tcons</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="intsize_eq"><span class="id" title="lemma">intsize_eq</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">s1</span> <span class="id" title="var">s2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize"><span class="id" title="inductive">intsize</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#s1"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#s1"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="type_eq"><span class="id" title="lemma">type_eq</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">ty1</span> <span class="id" title="var">ty2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#ty1"><span class="id" title="variable">ty1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#ty2"><span class="id" title="variable">ty2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#ty1"><span class="id" title="variable">ty1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#ty2"><span class="id" title="variable">ty2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a><br/>
<span class="id" title="keyword">with</span> <a name="typelist_eq"><span class="id" title="lemma">typelist_eq</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">tyl1</span> <span class="id" title="var">tyl2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#tyl1"><span class="id" title="variable">tyl1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#tyl2"><span class="id" title="variable">tyl2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#tyl1"><span class="id" title="variable">tyl1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#tyl2"><span class="id" title="variable">tyl2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#signedness"><span class="id" title="inductive">signedness</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#floatsize"><span class="id" title="inductive">floatsize</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.NArith.BinNat.html#N.eq_dec"><span class="id" title="definition">N.eq_dec</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Bool.Bool.html#bool_dec"><span class="id" title="lemma">bool_dec</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Bool.Bool.html#bool_dec"><span class="id" title="lemma">bool_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#intsize_eq"><span class="id" title="lemma">intsize_eq</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Opaque</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist_eq"><span class="id" title="lemma">typelist_eq</span></a>.<br/>

<br/>
</div>

<div class="doc">
Extract the attributes of a type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="attr_of_type"><span class="id" title="definition">attr_of_type</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">si</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">si</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">elt</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">elt</span> <span class="id" title="var">sz</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">args</span> <span class="id" title="var">res</span> <span class="id" title="var">cc</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Change the top-level attributes of a type 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="change_attributes"><span class="id" title="definition">change_attributes</span></a> (<span class="id" title="var">f</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>) (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">si</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">si</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">si</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">si</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <span class="id" title="var">sz</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">elt</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">elt</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">elt</span> <span class="id" title="var">sz</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">elt</span> <span class="id" title="var">sz</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">args</span> <span class="id" title="var">res</span> <span class="id" title="var">cc</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Erase the top-level attributes of a type 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="remove_attributes"><span class="id" title="definition">remove_attributes</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#change_attributes"><span class="id" title="definition">change_attributes</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a>.<br/>

<br/>
</div>

<div class="doc">
Add extra attributes to the top-level attributes of a type 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="attr_union"><span class="id" title="definition">attr_union</span></a> (<span class="id" title="var">a1</span> <span class="id" title="var">a2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_volatile</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">a1</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_volatile</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">)</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">||</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">a2</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_volatile</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_alignas</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">a1</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_alignas</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">),</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">a2</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">attr_alignas</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">None</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">al</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">⇒</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">al</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">al</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">None</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">⇒</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">al</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">n1</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">n2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">⇒</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">N.max</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">n1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">n2</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#mk_attr"><span class="id" title="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="merge_attributes"><span class="id" title="definition">merge_attributes</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">a</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#change_attributes"><span class="id" title="definition">change_attributes</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_union"><span class="id" title="definition">attr_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a>.<br/>

<br/>
</div>

<div class="doc">
Syntax for <span class="inlinecode"><span class="id" title="keyword">struct</span></span> and <span class="inlinecode"><span class="id" title="var">union</span></span> definitions.  <span class="inlinecode"><span class="id" title="keyword">struct</span></span> and <span class="inlinecode"><span class="id" title="var">union</span></span>
  are collectively called "composites".  Each compilation unit
  comes with a list of top-level definitions of composites. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="struct_or_union"><span class="id" title="inductive">struct_or_union</span></a> : <span class="id" title="keyword">Type</span> := <a name="Struct"><span class="id" title="constructor">Struct</span></a> | <a name="Union"><span class="id" title="constructor">Union</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="members"><span class="id" title="definition">members</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="composite_definition"><span class="id" title="inductive">composite_definition</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a name="Composite"><span class="id" title="constructor">Composite</span></a> (<span class="id" title="var">id</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) (<span class="id" title="var">su</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#struct_or_union"><span class="id" title="inductive">struct_or_union</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) (<span class="id" title="var">a</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="name_composite_def"><span class="id" title="definition">name_composite_def</span></a> (<span class="id" title="var">c</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) : <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">id</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="composite_def_eq"><span class="id" title="definition">composite_def_eq</span></a> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
- <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.NArith.BinNat.html#N.eq_dec"><span class="id" title="definition">N.eq_dec</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Bool.Bool.html#bool_dec"><span class="id" title="lemma">bool_dec</span></a>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#list_eq_dec"><span class="id" title="lemma">list_eq_dec</span></a>. <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a>.<br/>
- <span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Opaque</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_def_eq"><span class="id" title="definition">composite_def_eq</span></a>.<br/>

<br/>
</div>

<div class="doc">
For type-checking, compilation and semantics purposes, the composite
  definitions are collected in the following <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a></span> environment.
  The <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#composite"><span class="id" title="record">composite</span></a></span> record contains additional information compared with
  the <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a></span>, such as size and alignment information. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a name="composite"><span class="id" title="record">composite</span></a> : <span class="id" title="keyword">Type</span> := {<br/>
&nbsp;&nbsp;<a name="co_su"><span class="id" title="projection">co_su</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#struct_or_union"><span class="id" title="inductive">struct_or_union</span></a>;<br/>
&nbsp;&nbsp;<a name="co_members"><span class="id" title="projection">co_members</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>;<br/>
&nbsp;&nbsp;<a name="co_attr"><span class="id" title="projection">co_attr</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>;<br/>
&nbsp;&nbsp;<a name="co_sizeof"><span class="id" title="projection">co_sizeof</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>;<br/>
&nbsp;&nbsp;<a name="co_alignof"><span class="id" title="projection">co_alignof</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>;<br/>
&nbsp;&nbsp;<a name="co_rank"><span class="id" title="projection">co_rank</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;<a name="co_sizeof_pos"><span class="id" title="projection">co_sizeof_pos</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof"><span class="id" title="method">co_sizeof</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#162be8364124d2d389b2e8a3fc881ab2"><span class="id" title="notation">≥</span></a> 0;<br/>
&nbsp;&nbsp;<a name="co_alignof_two_p"><span class="id" title="projection">co_alignof_two_p</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="method">co_alignof</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_power_nat"><span class="id" title="definition">two_power_nat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#n"><span class="id" title="variable">n</span></a>;<br/>
&nbsp;&nbsp;<a name="co_sizeof_alignof"><span class="id" title="projection">co_sizeof_alignof</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="method">co_alignof</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof"><span class="id" title="method">co_sizeof</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">)</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="composite_env"><span class="id" title="definition">composite_env</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="compcert.lib.Maps.html#PTree.t"><span class="id" title="definition">PTree.t</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite"><span class="id" title="record">composite</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab170"></a><h1 class="section">Operations over types</h1>

<div class="paragraph"> </div>

<a name="lab171"></a><h2 class="section">Conversions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="type_int32s"><span class="id" title="definition">type_int32s</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="type_bool"><span class="id" title="definition">type_bool</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a>.<br/>

<br/>
</div>

<div class="doc">
The usual unary conversion.  Promotes small integer types to <span class="inlinecode"><a class="idref" href="compcert.lib.Integers.html#Make.signed"><span class="id" title="definition">signed</span></a></span> <span class="inlinecode"><span class="id" title="var">int32</span></span>
  and degrades array types and function types to pointer types.
  Attributes are erased. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="typeconv"><span class="id" title="definition">typeconv</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> | <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> | <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t</span> <span class="id" title="var">sz</span> <span class="id" title="var">a</span>       ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">t</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>     ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>                   ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#remove_attributes"><span class="id" title="definition">remove_attributes</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Default conversion for arguments to an unprototyped or variadic function.
  Like <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#typeconv"><span class="id" title="definition">typeconv</span></a></span> but also converts single floats to double floats. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="default_argument_conversion"><span class="id" title="definition">default_argument_conversion</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> | <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> | <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>          ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t</span> <span class="id" title="var">sz</span> <span class="id" title="var">a</span>       ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">t</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>     ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#noattr"><span class="id" title="definition">noattr</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>                   ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#remove_attributes"><span class="id" title="definition">remove_attributes</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab172"></a><h2 class="section">Complete types</h2>

<div class="paragraph"> </div>

 A type is complete if it fully describes an object.
  All struct and union names appearing in the type must be defined,
  unless they occur under a pointer or function type.  <span class="inlinecode"><span class="id" title="var">void</span></span> and
  function types are incomplete types. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="complete_type"><span class="id" title="definition">complete_type</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="complete_or_function_type"><span class="id" title="definition">complete_or_function_type</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab173"></a><h2 class="section">Alignment of a type</h2>

<div class="paragraph"> </div>

 Adjust the natural alignment <span class="inlinecode"><a class="idref" href="compcert.lib.Coqlib.html#al"><span class="id" title="variable">al</span></a></span> based on the attributes <span class="inlinecode"><a class="idref" href="compcert.lib.Intv.html#FOLD.a"><span class="id" title="variable">a</span></a></span> attached
  to the type.  If an "alignas" attribute is given, use it as alignment
  in preference to <span class="inlinecode"><a class="idref" href="compcert.lib.Coqlib.html#al"><span class="id" title="variable">al</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="align_attr"><span class="id" title="definition">align_attr</span></a> (<span class="id" title="var">a</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>) (<span class="id" title="var">al</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#attr_alignas"><span class="id" title="projection">attr_alignas</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">l</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#al"><span class="id" title="variable">al</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
In the ISO C standard, alignment is defined only for complete
  types.  However, it is convenient that <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a></span> is a total
  function.  For incomplete types, it returns 1. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="alignof"><span class="id" title="definition">alignof</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_of_type"><span class="id" title="definition">attr_of_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.x86_64.Archi.html#align_int64"><span class="id" title="definition">Archi.align_int64</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F32"><span class="id" title="constructor">F32</span></a> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.x86_64.Archi.html#align_float64"><span class="id" title="definition">Archi.align_float64</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a> <span class="id" title="keyword">then</span> 8 <span class="id" title="keyword">else</span> 4<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <span class="id" title="var">co</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 1 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>

<br/>
<span class="id" title="keyword">Remark</span> <a name="align_attr_two_p"><span class="id" title="lemma">align_attr_two_p</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">al</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al"><span class="id" title="variable">al</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_power_nat"><span class="id" title="definition">two_power_nat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al"><span class="id" title="variable">al</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_power_nat"><span class="id" title="definition">two_power_nat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_alignas"><span class="id" title="projection">attr_alignas</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.NArith.BinNat.html#N.to_nat"><span class="id" title="definition">N.to_nat</span></a> <span class="id" title="var">n</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#two_power_nat_two_p"><span class="id" title="lemma">two_power_nat_two_p</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znat.html#N_nat_Z"><span class="id" title="lemma">N_nat_Z</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_two_p"><span class="id" title="lemma">alignof_two_p</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">t</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_power_nat"><span class="id" title="definition">two_power_nat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr_two_p"><span class="id" title="lemma">align_attr_two_p</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 1%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 2%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.x86_64.Archi.html#align_int64"><span class="id" title="definition">Archi.align_int64</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; ((<span class="id" title="tactic">∃</span> 2%<span class="id" title="var">nat</span>; <span class="id" title="tactic">reflexivity</span>) || (<span class="id" title="tactic">∃</span> 3%<span class="id" title="var">nat</span>; <span class="id" title="tactic">reflexivity</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 2%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.x86_64.Archi.html#align_float64"><span class="id" title="definition">Archi.align_float64</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; ((<span class="id" title="tactic">∃</span> 2%<span class="id" title="var">nat</span>; <span class="id" title="tactic">reflexivity</span>) || (<span class="id" title="tactic">∃</span> 3%<span class="id" title="var">nat</span>; <span class="id" title="tactic">reflexivity</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">if</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a> <span class="id" title="keyword">then</span> 3%<span class="id" title="var">nat</span> <span class="id" title="keyword">else</span> 2%<span class="id" title="var">nat</span>); <span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof_two_p"><span class="id" title="projection">co_alignof_two_p</span></a>. <span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof_two_p"><span class="id" title="projection">co_alignof_two_p</span></a>. <span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_pos"><span class="id" title="lemma">alignof_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a1c07c706e79df7cc9eee5b1e369014a"><span class="id" title="notation">&gt;</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_two_p"><span class="id" title="lemma">alignof_two_p</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">EQ</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#two_power_nat_pos"><span class="id" title="lemma">two_power_nat_pos</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab174"></a><h2 class="section">Size of a type</h2>

<div class="paragraph"> </div>

 In the ISO C standard, size is defined only for complete
  types.  However, it is convenient that <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a></span> is a total
  function.  For <span class="inlinecode"><span class="id" title="var">void</span></span> and function types, we follow GCC and define
  their size to be 1.  For undefined structures and unions, the size is
  arbitrarily taken to be 0.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="sizeof"><span class="id" title="definition">sizeof</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 2<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 8<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F32"><span class="id" title="constructor">F32</span></a> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <span class="id" title="var">_</span> ⇒ 8<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a> <span class="id" title="keyword">then</span> 8 <span class="id" title="keyword">else</span> 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#88e34ed7a73f02772126289867960764"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.max"><span class="id" title="definition">Z.max</span></a> 0 <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof"><span class="id" title="projection">co_sizeof</span></a> <span class="id" title="var">co</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0 <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_pos"><span class="id" title="lemma">sizeof_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#162be8364124d2d389b2e8a3fc881ab2"><span class="id" title="notation">≥</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> 0 <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#88e34ed7a73f02772126289867960764"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.max"><span class="id" title="definition">Z.max</span></a> 0 <span class="id" title="var">z</span>) <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zmult_ge_compat_r"><span class="id" title="lemma">Zmult_ge_compat_r</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof_pos"><span class="id" title="projection">co_sizeof_pos</span></a>. <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof_pos"><span class="id" title="projection">co_sizeof_pos</span></a>. <span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The size of a type is an integral multiple of its alignment,
  unless the alignment was artificially increased with the <span class="inlinecode"><span class="id" title="var">__Alignas</span></span>
  attribute. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="naturally_aligned"><span class="id" title="definition">naturally_aligned</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_alignas"><span class="id" title="projection">attr_alignas</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_of_type"><span class="id" title="definition">attr_of_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#naturally_aligned"><span class="id" title="definition">naturally_aligned</span></a> <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_alignof_compat"><span class="id" title="lemma">sizeof_alignof_compat</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#naturally_aligned"><span class="id" title="definition">naturally_aligned</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">A</span> <span class="id" title="var">B</span>]; <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a>, <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">A</span>; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
- <span class="id" title="tactic">∃</span> (8 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#66073ffd934badf1f6e703023820601f"><span class="id" title="notation">/</span></a> <a class="idref" href="compcert.x86_64.Archi.html#align_int64"><span class="id" title="definition">Archi.align_int64</span></a>). <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.x86_64.Archi.html#align_int64"><span class="id" title="definition">Archi.align_int64</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>. <span class="id" title="tactic">∃</span> (8 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#66073ffd934badf1f6e703023820601f"><span class="id" title="notation">/</span></a> <a class="idref" href="compcert.x86_64.Archi.html#align_float64"><span class="id" title="definition">Archi.align_float64</span></a>). <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.x86_64.Archi.html#align_float64"><span class="id" title="definition">Archi.align_float64</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.divide_mul_l"><span class="id" title="lemma">Z.divide_mul_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof_alignof"><span class="id" title="projection">co_sizeof_alignof</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_0"><span class="id" title="abbreviation">Zdivide_0</span></a>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof_alignof"><span class="id" title="projection">co_sizeof_alignof</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_0"><span class="id" title="abbreviation">Zdivide_0</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab175"></a><h2 class="section">Size and alignment for composite definitions</h2>

<div class="paragraph"> </div>

 The alignment for a structure or union is the max of the alignment
  of its members. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="alignof_composite"><span class="id" title="definition">alignof_composite</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.max"><span class="id" title="definition">Z.max</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">m'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The size of a structure corresponds to its layout: fields are
  laid out consecutively, and padding is inserted to align
  each field to the alignment for its type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">cur</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#cur"><span class="id" title="variable">cur</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cur"><span class="id" title="variable">cur</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">m'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The size of an union is the max of the sizes of its members. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="sizeof_union"><span class="id" title="definition">sizeof_union</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ 0<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.max"><span class="id" title="definition">Z.max</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union"><span class="id" title="definition">sizeof_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">m'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_composite_two_p"><span class="id" title="lemma">alignof_composite_two_p</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">m</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_power_nat"><span class="id" title="definition">two_power_nat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">∃</span> 0%<span class="id" title="var">nat</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.max_case"><span class="id" title="lemma">Z.max_case</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_two_p"><span class="id" title="lemma">alignof_two_p</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_composite_pos"><span class="id" title="lemma">alignof_composite_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a1c07c706e79df7cc9eee5b1e369014a"><span class="id" title="notation">&gt;</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr_two_p"><span class="id" title="lemma">align_attr_two_p</span></a>. <span class="id" title="tactic">apply</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite_two_p"><span class="id" title="lemma">alignof_composite_two_p</span></a> <span class="id" title="var">env</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">a</span>). <span class="id" title="tactic">intros</span> [<span class="id" title="var">n</span> <span class="id" title="var">EQ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#two_power_nat_pos"><span class="id" title="lemma">two_power_nat_pos</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_struct_incr"><span class="id" title="lemma">sizeof_struct_incr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">m</span> <span class="id" title="var">cur</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#cur"><span class="id" title="variable">cur</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cur"><span class="id" title="variable">cur</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">omega</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_trans"><span class="id" title="abbreviation">Zle_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <span class="id" title="var">cur</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_le"><span class="id" title="lemma">align_le</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_pos"><span class="id" title="lemma">alignof_pos</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_trans"><span class="id" title="abbreviation">Zle_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <span class="id" title="var">cur</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_pos"><span class="id" title="lemma">sizeof_pos</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>); <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_union_pos"><span class="id" title="lemma">sizeof_union_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">m</span>, 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union"><span class="id" title="definition">sizeof_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">xomega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab176"></a><h2 class="section">Byte offset for a field of a structure</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.backend.Cminor.html#env"><span class="id" title="definition">env</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="projection">id</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a></span> returns the byte offset for field <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#id"><span class="id" title="projection">id</span></a></span>
  in a structure whose members are <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a></span>.  Fields are laid out
  consecutively, and padding is inserted to align each field to the
  alignment for its type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="field_offset_rec"><span class="id" title="definition">field_offset_rec</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">id</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) (<span class="id" title="var">fld</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) (<span class="id" title="var">pos</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">fld</span>} : <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> (<a class="idref" href="compcert.common.Errors.html#MSG"><span class="id" title="constructor">MSG</span></a> "Unknown field " <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Errors.html#CTX"><span class="id" title="constructor">CTX</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">fld'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="var">id'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec"><span class="id" title="definition">field_offset_rec</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="var">fld'</span> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="field_offset"><span class="id" title="definition">field_offset</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">id</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) (<span class="id" title="var">fld</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec"><span class="id" title="definition">field_offset_rec</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="field_type"><span class="id" title="definition">field_type</span></a> (<span class="id" title="var">id</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) (<span class="id" title="var">fld</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">fld</span>} : <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> (<a class="idref" href="compcert.common.Errors.html#MSG"><span class="id" title="constructor">MSG</span></a> "Unknown field " <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Errors.html#CTX"><span class="id" title="constructor">CTX</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">fld'</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="var">id'</span> <span class="id" title="keyword">then</span> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">t</span> <span class="id" title="keyword">else</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="var">fld'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Some sanity checks about field offsets.  First, field offsets are
  within the range of acceptable offsets. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Remark</span> <a name="field_offset_rec_in_range"><span class="id" title="lemma">field_offset_rec_in_range</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">ofs</span> <span class="id" title="var">ty</span> <span class="id" title="var">fld</span> <span class="id" title="var">pos</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec"><span class="id" title="definition">field_offset_rec</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">ty</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">fld</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">i</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_le"><span class="id" title="lemma">align_le</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_pos"><span class="id" title="lemma">alignof_pos</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct_incr"><span class="id" title="lemma">sizeof_struct_incr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <span class="id" title="var">IHfld</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">A</span> <span class="id" title="var">B</span>]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_trans"><span class="id" title="abbreviation">Zle_trans</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_trans"><span class="id" title="abbreviation">Zle_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> <span class="id" title="var">pos</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_le"><span class="id" title="lemma">align_le</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_pos"><span class="id" title="lemma">alignof_pos</span></a>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_pos"><span class="id" title="lemma">sizeof_pos</span></a> <span class="id" title="var">env</span> <span class="id" title="var">t</span>). <span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="field_offset_in_range"><span class="id" title="lemma">field_offset_in_range</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">fld</span> <span class="id" title="var">id</span> <span class="id" title="var">ofs</span> <span class="id" title="var">ty</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> 0 <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec_in_range"><span class="id" title="lemma">field_offset_rec_in_range</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Second, two distinct fields do not overlap 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="field_offset_no_overlap"><span class="id" title="lemma">field_offset_no_overlap</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id1</span> <span class="id" title="var">ofs1</span> <span class="id" title="var">ty1</span> <span class="id" title="var">id2</span> <span class="id" title="var">ofs2</span> <span class="id" title="var">ty2</span> <span class="id" title="var">fld</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs1"><span class="id" title="variable">ofs1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty1"><span class="id" title="variable">ty1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id2"><span class="id" title="variable">id2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs2"><span class="id" title="variable">ofs2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id2"><span class="id" title="variable">id2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty2"><span class="id" title="variable">ty2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id2"><span class="id" title="variable">id2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#ofs1"><span class="id" title="variable">ofs1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty1"><span class="id" title="variable">ty1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs2"><span class="id" title="variable">ofs2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs2"><span class="id" title="variable">ofs2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a3448b794f7a26d611ad36492b5d640b"><span class="id" title="notation">+</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty2"><span class="id" title="variable">ty2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs1"><span class="id" title="variable">ofs1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">fld</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a>. <span class="id" title="tactic">generalize</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">pos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">fld</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">i</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id1</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id2</span> <span class="id" title="var">i</span>).<br/>
+ <span class="id" title="tactic">congruence</span>.<br/>
+ <span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec_in_range"><span class="id" title="lemma">field_offset_rec_in_range</span></a>. <span class="id" title="tactic">eexact</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">tauto</span>.<br/>
+ <span class="id" title="tactic">subst</span> <span class="id" title="var">i</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset_rec_in_range"><span class="id" title="lemma">field_offset_rec_in_range</span></a>. <span class="id" title="tactic">eexact</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">tauto</span>.<br/>
+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHfld</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Third, if a struct is a prefix of another, the offsets of common fields
    are the same. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="field_offset_prefix"><span class="id" title="lemma">field_offset_prefix</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">ofs</span> <span class="id" title="var">fld2</span> <span class="id" title="var">fld1</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld1"><span class="id" title="variable">fld1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#fld1"><span class="id" title="variable">fld1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld2"><span class="id" title="variable">fld2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">fld1</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a>. <span class="id" title="tactic">generalize</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">pos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">fld1</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">i</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id</span> <span class="id" title="var">i</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Fourth, the position of each field respects its alignment. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="field_offset_aligned"><span class="id" title="lemma">field_offset_aligned</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">fld</span> <span class="id" title="var">ofs</span> <span class="id" title="var">ty</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_type"><span class="id" title="definition">field_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fld"><span class="id" title="variable">fld</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ofs"><span class="id" title="variable">ofs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">ty</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#field_offset"><span class="id" title="definition">field_offset</span></a>. <span class="id" title="tactic">generalize</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">pos</span>. <span class="id" title="var">revert</span> <span class="id" title="var">fld</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">fld</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">i</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id</span> <span class="id" title="var">i</span>).<br/>
+ <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_divides"><span class="id" title="lemma">align_divides</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_pos"><span class="id" title="lemma">alignof_pos</span></a>.<br/>
+ <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab177"></a><h2 class="section">Access modes</h2>

<div class="paragraph"> </div>

 The <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#access_mode"><span class="id" title="definition">access_mode</span></a></span> function describes how a l-value of the given
type must be accessed:
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.backend.SplitLong.html#ch"><span class="id" title="variable">ch</span></a></span>: access by value, i.e. by loading from the address
  of the l-value using the memory chunk <span class="inlinecode"><a class="idref" href="compcert.backend.SplitLong.html#ch"><span class="id" title="variable">ch</span></a></span>;

</li>
<li> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#By_reference"><span class="id" title="constructor">By_reference</span></a></span>: access by reference, i.e. by just returning
  the address of the l-value (used for arrays and functions);

</li>
<li> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#By_copy"><span class="id" title="constructor">By_copy</span></a></span>: access is by reference, assignment is by copy
  (used for <span class="inlinecode"><span class="id" title="keyword">struct</span></span> and <span class="inlinecode"><span class="id" title="var">union</span></span> types)

</li>
<li> <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#By_nothing"><span class="id" title="constructor">By_nothing</span></a></span>: no access is possible, e.g. for the <span class="inlinecode"><span class="id" title="var">void</span></span> type.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="mode"><span class="id" title="inductive">mode</span></a>: <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="By_value"><span class="id" title="constructor">By_value</span></a>: <a class="idref" href="compcert.common.AST.html#memory_chunk"><span class="id" title="inductive">memory_chunk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#mode"><span class="id" title="inductive">mode</span></a><br/>
&nbsp;&nbsp;| <a name="By_reference"><span class="id" title="constructor">By_reference</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#mode"><span class="id" title="inductive">mode</span></a><br/>
&nbsp;&nbsp;| <a name="By_copy"><span class="id" title="constructor">By_copy</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#mode"><span class="id" title="inductive">mode</span></a><br/>
&nbsp;&nbsp;| <a name="By_nothing"><span class="id" title="constructor">By_nothing</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#mode"><span class="id" title="inductive">mode</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="access_mode"><span class="id" title="definition">access_mode</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.cfrontend.Ctypes.html#mode"><span class="id" title="inductive">mode</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint8signed"><span class="id" title="constructor">Mint8signed</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Unsigned"><span class="id" title="constructor">Unsigned</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint8unsigned"><span class="id" title="constructor">Mint8unsigned</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Signed"><span class="id" title="constructor">Signed</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint16signed"><span class="id" title="constructor">Mint16signed</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Unsigned"><span class="id" title="constructor">Unsigned</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint16unsigned"><span class="id" title="constructor">Mint16unsigned</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint32"><span class="id" title="constructor">Mint32</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint8unsigned"><span class="id" title="constructor">Mint8unsigned</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mint64"><span class="id" title="constructor">Mint64</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F32"><span class="id" title="constructor">F32</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mfloat32"><span class="id" title="constructor">Mfloat32</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mfloat64"><span class="id" title="constructor">Mfloat64</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_nothing"><span class="id" title="constructor">By_nothing</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <a class="idref" href="compcert.common.AST.html#Mptr"><span class="id" title="definition">Mptr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_reference"><span class="id" title="constructor">By_reference</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_reference"><span class="id" title="constructor">By_reference</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_copy"><span class="id" title="constructor">By_copy</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#By_copy"><span class="id" title="constructor">By_copy</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
For the purposes of the semantics and the compiler, a type denotes
  a volatile access if it carries the <span class="inlinecode"><span class="id" title="var">volatile</span></span> attribute and it is
  accessed by value. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="type_is_volatile"><span class="id" title="definition">type_is_volatile</span></a> (<span class="id" title="var">ty</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#access_mode"><span class="id" title="definition">access_mode</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#By_value"><span class="id" title="constructor">By_value</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#attr_volatile"><span class="id" title="projection">attr_volatile</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#attr_of_type"><span class="id" title="definition">attr_of_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>          ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab178"></a><h2 class="section">Alignment for block copy operations</h2>

<div class="paragraph"> </div>

 A variant of <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a></span> for use in block copy operations.
  Block copy operations do not support alignments greater than 8,
  and require the size to be an integral multiple of the alignment. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="alignof_blockcopy"><span class="id" title="definition">alignof_blockcopy</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I8"><span class="id" title="constructor">I8</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I16"><span class="id" title="constructor">I16</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 2<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#I32"><span class="id" title="constructor">I32</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#IBool"><span class="id" title="constructor">IBool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 8<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F32"><span class="id" title="constructor">F32</span></a> <span class="id" title="var">_</span> ⇒ 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <span class="id" title="var">_</span> ⇒ 8<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a> <span class="id" title="keyword">then</span> 8 <span class="id" title="keyword">else</span> 4<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_blockcopy"><span class="id" title="definition">alignof_blockcopy</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ 1<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.min"><span class="id" title="definition">Z.min</span></a> 8 (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <span class="id" title="var">co</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_blockcopy_1248"><span class="id" title="lemma">alignof_blockcopy_1248</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">ty</span>, <span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_blockcopy"><span class="id" title="definition">alignof_blockcopy</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">in</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 8.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">co</span>, <span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Zmin"><span class="id" title="abbreviation">Zmin</span></a> 8 (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 8).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof_two_p"><span class="id" title="projection">co_alignof_two_p</span></a> <span class="id" title="var">co</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">EQ</span>]. <span class="id" title="tactic">unfold</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.min_l"><span class="id" title="lemma">Z.min_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#two_power_nat_two_p"><span class="id" title="lemma">two_power_nat_two_p</span></a>. <span class="id" title="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znat.html#inj_S"><span class="id" title="abbreviation">inj_S</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> 8 <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> 3). <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#two_p_monotone"><span class="id" title="lemma">two_p_monotone</span></a>. <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="compcert.x86_64.Archi.html#ptr64"><span class="id" title="definition">Archi.ptr64</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_blockcopy_pos"><span class="id" title="lemma">alignof_blockcopy_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">ty</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_blockcopy"><span class="id" title="definition">alignof_blockcopy</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#a1c07c706e79df7cc9eee5b1e369014a"><span class="id" title="notation">&gt;</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_blockcopy_1248"><span class="id" title="lemma">alignof_blockcopy_1248</span></a> <span class="id" title="var">env</span> <span class="id" title="var">ty</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_alignof_blockcopy_compat"><span class="id" title="lemma">sizeof_alignof_blockcopy_compat</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">ty</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_blockcopy"><span class="id" title="definition">alignof_blockcopy</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ty"><span class="id" title="variable">ty</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">co</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.min"><span class="id" title="definition">Z.min</span></a> 8 (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof"><span class="id" title="projection">co_sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#22aee23095fa75a48e17ac5311892ed3"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_trans"><span class="id" title="abbreviation">Zdivide_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <span class="id" title="var">co</span>). 2: <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof_alignof"><span class="id" title="projection">co_sizeof_alignof</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof_two_p"><span class="id" title="projection">co_alignof_two_p</span></a> <span class="id" title="var">co</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">EQ</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.min_case"><span class="id" title="lemma">Z.min_case</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> 8 <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_p"><span class="id" title="definition">two_p</span></a> 3).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zpower.html#two_p_is_exp"><span class="id" title="lemma">two_p_is_exp</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#two_power_nat_two_p"><span class="id" title="lemma">two_power_nat_two_p</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znat.html#inj_S"><span class="id" title="abbreviation">inj_S</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.divide_mul_l"><span class="id" title="lemma">Z.divide_mul_l</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_refl"><span class="id" title="abbreviation">Zdivide_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_0"><span class="id" title="abbreviation">Zdivide_0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Znumtheory.html#Zdivide_0"><span class="id" title="abbreviation">Zdivide_0</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Type ranks 
<div class="paragraph"> </div>

 The rank of a type is a nonnegative integer that measures the direct nesting
  of arrays, struct and union types.  It does not take into account indirect
  nesting such as a struct type that appears under a pointer or function type.
  Type ranks ensure that type expressions (ignoring pointer and function types)
  have an inductive structure. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="rank_type"><span class="id" title="definition">rank_type</span></a> (<span class="id" title="var">ce</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">t'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">id</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_rank"><span class="id" title="projection">co_rank</span></a> <span class="id" title="var">co</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="rank_members"><span class="id" title="definition">rank_members</span></a> (<span class="id" title="var">ce</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ 0%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">m</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#max"><span class="id" title="abbreviation">Peano.max</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <span class="id" title="var">t</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members"><span class="id" title="definition">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab179"></a><h2 class="section">C types and back-end types</h2>

<div class="paragraph"> </div>

 Extracting a type list from a function parameter declaration. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="type_of_params"><span class="id" title="definition">type_of_params</span></a> (<span class="id" title="var">params</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>)) : <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#params"><span class="id" title="variable">params</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tnil"><span class="id" title="constructor">Tnil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">rem</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#Tcons"><span class="id" title="constructor">Tcons</span></a> <span class="id" title="var">ty</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#type_of_params"><span class="id" title="definition">type_of_params</span></a> <span class="id" title="var">rem</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Translating C types to Cminor types and function signatures. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="typ_of_type"><span class="id" title="definition">typ_of_type</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="compcert.common.AST.html#typ"><span class="id" title="inductive">AST.typ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> ⇒ <a class="idref" href="compcert.common.AST.html#Tint"><span class="id" title="constructor">AST.Tint</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tint"><span class="id" title="constructor">Tint</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.AST.html#Tint"><span class="id" title="constructor">AST.Tint</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tlong"><span class="id" title="constructor">Tlong</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.AST.html#Tlong"><span class="id" title="constructor">AST.Tlong</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F32"><span class="id" title="constructor">F32</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.AST.html#Tsingle"><span class="id" title="constructor">AST.Tsingle</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfloat"><span class="id" title="constructor">Tfloat</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F64"><span class="id" title="constructor">F64</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.AST.html#Tfloat"><span class="id" title="constructor">AST.Tfloat</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tpointer"><span class="id" title="constructor">Tpointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.AST.html#Tptr"><span class="id" title="definition">AST.Tptr</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="opttyp_of_type"><span class="id" title="definition">opttyp_of_type</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="compcert.common.AST.html#typ"><span class="id" title="inductive">AST.typ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#typ_of_type"><span class="id" title="definition">typ_of_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="typlist_of_typelist"><span class="id" title="definition">typlist_of_typelist</span></a> (<span class="id" title="var">tl</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.AST.html#typ"><span class="id" title="inductive">AST.typ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#tl"><span class="id" title="variable">tl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tnil"><span class="id" title="constructor">Tnil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Tcons"><span class="id" title="constructor">Tcons</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#typ_of_type"><span class="id" title="definition">typ_of_type</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typlist_of_typelist"><span class="id" title="definition">typlist_of_typelist</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tl"><span class="id" title="variable">tl</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="signature_of_type"><span class="id" title="definition">signature_of_type</span></a> (<span class="id" title="var">args</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a>) (<span class="id" title="var">res</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>) (<span class="id" title="var">cc</span>: <a class="idref" href="compcert.common.AST.html#calling_convention"><span class="id" title="record">calling_convention</span></a>): <a class="idref" href="compcert.common.AST.html#signature"><span class="id" title="record">signature</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mksignature"><span class="id" title="constructor">mksignature</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#typlist_of_typelist"><span class="id" title="definition">typlist_of_typelist</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#args"><span class="id" title="variable">args</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#opttyp_of_type"><span class="id" title="definition">opttyp_of_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#res"><span class="id" title="variable">res</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#cc"><span class="id" title="variable">cc</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab180"></a><h1 class="section">Construction of the composite environment</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="sizeof_composite"><span class="id" title="definition">sizeof_composite</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">su</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#struct_or_union"><span class="id" title="inductive">struct_or_union</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Struct"><span class="id" title="constructor">Struct</span></a> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> 0 <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Union"><span class="id" title="constructor">Union</span></a>  ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union"><span class="id" title="definition">sizeof_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_composite_pos"><span class="id" title="lemma">sizeof_composite_pos</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span>, 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#208bafb0e148fe7fb7dcd812c227f4ee"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite"><span class="id" title="definition">sizeof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">su</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct_incr"><span class="id" title="lemma">sizeof_struct_incr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union_pos"><span class="id" title="lemma">sizeof_union_pos</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="complete_members"><span class="id" title="definition">complete_members</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">id</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">m'</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">m'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="complete_member"><span class="id" title="lemma">complete_member</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">t</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id1</span> <span class="id" title="var">t1</span>] <span class="id" title="var">m</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Convert a composite definition to its internal representation.
  The size and alignment of the composite are determined at this time.
  The alignment takes into account the <span class="inlinecode"><span class="id" title="var">__Alignas</span></span> attributes
  associated with the definition.  The size is rounded up to a multiple
  of the alignment.

<div class="paragraph"> </div>

  The conversion fails if a type of a member is not complete.  This rules
  out incorrect recursive definitions such as
<pre>
    struct s { int x; struct s next; }
</pre>
  Here, when we process the definition of <span class="inlinecode"><span class="id" title="keyword">struct</span></span> <span class="inlinecode"><a class="idref" href="compcert.common.Errors.html#s"><span class="id" title="variable">s</span></a></span>, the identifier <span class="inlinecode"><a class="idref" href="compcert.common.Errors.html#s"><span class="id" title="variable">s</span></a></span>
  is not bound yet in the composite environment, hence field <span class="inlinecode"><a class="idref" href="liblayers.compcertx.InitMemRel.html#next"><span class="id" title="variable">next</span></a></span>
  has an incomplete type.  However, recursions that go through a pointer type
  are correctly handled:
<pre>
    struct s { int x; struct s * next; }
</pre>
  Here, <span class="inlinecode"><a class="idref" href="liblayers.compcertx.InitMemRel.html#next"><span class="id" title="variable">next</span></a></span> has a pointer type, which is always complete, even though
  <span class="inlinecode"><a class="idref" href="compcert.common.Errors.html#s"><span class="id" title="variable">s</span></a></span> is not yet bound to a composite.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Program Definition</span> <a name="composite_of_def"><span class="id" title="definition">composite_of_def</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">id</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) (<span class="id" title="var">su</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#struct_or_union"><span class="id" title="inductive">struct_or_union</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#members"><span class="id" title="definition">members</span></a>) (<span class="id" title="var">a</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#attr"><span class="id" title="record">attr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite"><span class="id" title="record">composite</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">return</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> (<a class="idref" href="compcert.common.Errors.html#MSG"><span class="id" title="constructor">MSG</span></a> "Multiple definitions of struct or union " <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Errors.html#CTX"><span class="id" title="constructor">CTX</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> (<a class="idref" href="compcert.common.Errors.html#MSG"><span class="id" title="constructor">MSG</span></a> "Incomplete struct or union " <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.common.Errors.html#CTX"><span class="id" title="constructor">CTX</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">al</span> := <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> {| <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">su</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">m</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">a</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">align</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">sizeof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">m</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">)</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">al</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">al</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_rank</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">m</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_sizeof_pos</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">_</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_alignof_two_p</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">_</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">co_sizeof_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">_</span></a> |}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_ge"><span class="id" title="abbreviation">Zle_ge</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.Zorder.html#Zle_trans"><span class="id" title="abbreviation">Zle_trans</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite_pos"><span class="id" title="lemma">sizeof_composite_pos</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_le"><span class="id" title="lemma">align_le</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite_pos"><span class="id" title="lemma">alignof_composite_pos</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr_two_p"><span class="id" title="lemma">align_attr_two_p</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite_two_p"><span class="id" title="lemma">alignof_composite_two_p</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Coqlib.html#align_divides"><span class="id" title="lemma">align_divides</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite_pos"><span class="id" title="lemma">alignof_composite_pos</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The composite environment for a program is obtained by entering
  its composite definitions in sequence.  The definitions are assumed
  to be listed in dependency order: the definition of a composite
  must precede all uses of this composite, unless the use is under
  a pointer or function type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">error_monad_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">defs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) : <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">defs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#801e5ac9868f2242b78eea52fa25c6f0"><span class="id" title="notation">do</span></a> <span class="id" title="var">co</span> <a class="idref" href="compcert.common.Errors.html#801e5ac9868f2242b78eea52fa25c6f0"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span><a class="idref" href="compcert.common.Errors.html#801e5ac9868f2242b78eea52fa25c6f0"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> (<a class="idref" href="compcert.lib.Maps.html#PTree.set"><span class="id" title="definition">PTree.set</span></a> <span class="id" title="var">id</span> <span class="id" title="var">co</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="build_composite_env"><span class="id" title="definition">build_composite_env</span></a> (<span class="id" title="var">defs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> (<a class="idref" href="compcert.lib.Maps.html#PTree.empty"><span class="id" title="definition">PTree.empty</span></a> <span class="id" title="var">_</span>) <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a>.<br/>

<br/>
</div>

<div class="doc">
Stability properties for alignments, sizes, and ranks.  If the type is
  complete in a composite environment <span class="inlinecode"><a class="idref" href="compcert.backend.Cminor.html#env"><span class="id" title="definition">env</span></a></span>, its size, alignment, and rank
  are unchanged if we add more definitions to <span class="inlinecode"><a class="idref" href="compcert.backend.Cminor.html#env"><span class="id" title="definition">env</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="STABILITY"><span class="id" title="section">STABILITY</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variables</span> <a name="STABILITY.env"><span class="id" title="variable">env</span></a> <a name="STABILITY.env'"><span class="id" title="variable">env'</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>.<br/>
<span class="id" title="keyword">Hypothesis</span> <a name="STABILITY.extends"><span class="id" title="variable">extends</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_stable"><span class="id" title="lemma">alignof_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof"><span class="id" title="definition">alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_stable"><span class="id" title="lemma">sizeof_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof"><span class="id" title="definition">sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="complete_type_stable"><span class="id" title="lemma">complete_type_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rank_type_stable"><span class="id" title="lemma">rank_type_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">t</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type"><span class="id" title="definition">complete_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">co</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.extends"><span class="id" title="variable">extends</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="alignof_composite_stable"><span class="id" title="lemma">alignof_composite_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_stable"><span class="id" title="lemma">alignof_stable</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_struct_stable"><span class="id" title="lemma">sizeof_struct_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">pos</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct"><span class="id" title="definition">sizeof_struct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos"><span class="id" title="variable">pos</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_stable"><span class="id" title="lemma">alignof_stable</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_stable"><span class="id" title="lemma">sizeof_stable</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_union_stable"><span class="id" title="lemma">sizeof_union_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union"><span class="id" title="definition">sizeof_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union"><span class="id" title="definition">sizeof_union</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_stable"><span class="id" title="lemma">sizeof_stable</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sizeof_composite_stable"><span class="id" title="lemma">sizeof_composite_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite"><span class="id" title="definition">sizeof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite"><span class="id" title="definition">sizeof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">su</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_struct_stable"><span class="id" title="lemma">sizeof_struct_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_union_stable"><span class="id" title="lemma">sizeof_union_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="complete_members_stable"><span class="id" title="lemma">complete_members_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_type_stable"><span class="id" title="lemma">complete_type_stable</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rank_members_stable"><span class="id" title="lemma">rank_members_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members"><span class="id" title="definition">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members"><span class="id" title="definition">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY.env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">id</span> <span class="id" title="var">t</span>]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type_stable"><span class="id" title="lemma">rank_type_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#STABILITY"><span class="id" title="section">STABILITY</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="add_composite_definitions_incr"><span class="id" title="lemma">add_composite_definitions_incr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span> <span class="id" title="var">defs</span> <span class="id" title="var">env1</span> <span class="id" title="var">env2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">defs</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="var">monadInv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdefs</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gso"><span class="id" title="lemma">PTree.gso</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">id0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It follows that the sizes and alignments contained in the composite
  environment produced by <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a></span> are consistent with
  the sizes and alignments of the members of the composite types. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a name="composite_consistent"><span class="id" title="record">composite_consistent</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) (<span class="id" title="var">co</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite"><span class="id" title="record">composite</span></a>) : <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;<a name="co_consistent_complete"><span class="id" title="projection">co_consistent_complete</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>;<br/>
&nbsp;&nbsp;<a name="co_consistent_alignof"><span class="id" title="projection">co_consistent_alignof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#align_attr"><span class="id" title="definition">align_attr</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite"><span class="id" title="definition">alignof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>));<br/>
&nbsp;&nbsp;<a name="co_consistent_sizeof"><span class="id" title="projection">co_consistent_sizeof</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_sizeof"><span class="id" title="projection">co_sizeof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.lib.Coqlib.html#align"><span class="id" title="definition">align</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite"><span class="id" title="definition">sizeof_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>)) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_alignof"><span class="id" title="projection">co_alignof</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>);<br/>
&nbsp;&nbsp;<a name="co_consistent_rank"><span class="id" title="projection">co_consistent_rank</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_rank"><span class="id" title="projection">co_rank</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members"><span class="id" title="definition">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>)<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> (<span class="id" title="var">env</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_consistent_stable"><span class="id" title="lemma">composite_consistent_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">env</span> <span class="id" title="var">env'</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">EXTENDS</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">co</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>]. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members_stable"><span class="id" title="lemma">complete_members_stable</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">B</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#alignof_composite_stable"><span class="id" title="lemma">alignof_composite_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#sizeof_composite_stable"><span class="id" title="lemma">sizeof_composite_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">D</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members_stable"><span class="id" title="lemma">rank_members_stable</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_of_def_consistent"><span class="id" title="lemma">composite_of_def_consistent</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">co</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <span class="id" title="var">env</span> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">C</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="build_composite_env_consistent"><span class="id" title="lemma">build_composite_env_consistent</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">defs</span> <span class="id" title="var">env</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">defs</span> <span class="id" title="var">env0</span> <span class="id" title="var">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gempty"><span class="id" title="lemma">PTree.gempty</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">defs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">d1</span> <span class="id" title="var">defs</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">d1</span>; <span class="id" title="var">monadInv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdefs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env1</span> := <a class="idref" href="compcert.lib.Maps.html#PTree.set"><span class="id" title="definition">PTree.set</span></a> <span class="id" title="var">id</span> <span class="id" title="var">x</span> <span class="id" title="var">env0</span>) <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">env0</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">env0</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>). <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">id1</span> <span class="id" title="var">co1</span>, <span class="id" title="var">env0</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">env1</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">env1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gso"><span class="id" title="lemma">PTree.gso</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent_stable"><span class="id" title="lemma">composite_consistent_stable</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">env0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">env1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>).<br/>
+ <span class="id" title="tactic">subst</span> <span class="id" title="var">id0</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">co</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def_consistent"><span class="id" title="lemma">composite_of_def_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Moreover, every composite definition is reflected in the composite environment. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="build_composite_env_charact"><span class="id" title="lemma">build_composite_env_charact</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">defs</span> <span class="id" title="var">env</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">co</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">defs</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="compcert.lib.Maps.html#PTree.empty"><span class="id" title="definition">PTree.empty</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite"><span class="id" title="record">composite</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">env0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">defs</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">defs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">d1</span> <span class="id" title="var">defs</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="var">contradiction</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">d1</span>; <span class="id" title="var">monadInv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; [<span class="id" title="tactic">idtac</span>|<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdefs</span>;<span class="id" title="tactic">eauto</span>]. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env0</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <span class="id" title="var">env0</span> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">C</span>; <span class="id" title="var">simplify_eq</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions_incr"><span class="id" title="lemma">add_composite_definitions_incr</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gss"><span class="id" title="lemma">PTree.gss</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="build_composite_env_domain"><span class="id" title="lemma">build_composite_env_domain</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">defs</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>)) <a class="idref" href="compcert.cfrontend.Ctypes.html#defs"><span class="id" title="variable">defs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">env0</span> <span class="id" title="var">defs0</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">REC</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">env</span> <span class="id" title="var">env'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">co</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <span class="id" title="var">id</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <span class="id" title="var">co</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <span class="id" title="var">co</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <span class="id" title="var">co</span>)) <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="var">monadInv</span> <span class="id" title="var">H</span>. <span class="id" title="var">exploit</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id0</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <span class="id" title="var">env</span> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">C</span>; <span class="id" title="var">simplify_eq</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">A</span>|<span class="id" title="var">A</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id</span> <span class="id" title="var">id0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">A</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">exploit</span> <span class="id" title="var">REC</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gempty"><span class="id" title="lemma">PTree.gempty</span></a>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As a corollay, in a consistent environment, the rank of a composite type
  is strictly greater than the ranks of its member types. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Remark</span> <a name="rank_type_members"><span class="id" title="lemma">rank_type_members</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ce</span> <span class="id" title="var">id</span> <span class="id" title="var">t</span> <span class="id" title="var">m</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#9b077c369e19739ef880736ba34623ff"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_members"><span class="id" title="definition">rank_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="var">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">xomega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rank_struct_member"><span class="id" title="lemma">rank_struct_member</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ce</span> <span class="id" title="var">id</span> <span class="id" title="var">a</span> <span class="id" title="var">co</span> <span class="id" title="var">id1</span> <span class="id" title="var">t1</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Tstruct"><span class="id" title="constructor">Tstruct</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a>))%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_consistent_rank"><span class="id" title="projection">co_consistent_rank</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type_members"><span class="id" title="lemma">rank_type_members</span></a> <span class="id" title="var">ce</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rank_union_member"><span class="id" title="lemma">rank_union_member</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ce</span> <span class="id" title="var">id</span> <span class="id" title="var">a</span> <span class="id" title="var">co</span> <span class="id" title="var">id1</span> <span class="id" title="var">t1</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env_consistent"><span class="id" title="definition">composite_env_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id1"><span class="id" title="variable">id1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type"><span class="id" title="definition">rank_type</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#ce"><span class="id" title="variable">ce</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Tunion"><span class="id" title="constructor">Tunion</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a>))%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_consistent_rank"><span class="id" title="projection">co_consistent_rank</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#rank_type_members"><span class="id" title="lemma">rank_type_members</span></a> <span class="id" title="var">ce</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab181"></a><h1 class="section">Programs and compilation units</h1>

<div class="paragraph"> </div>

 The definitions in this section are parameterized over a type <span class="inlinecode"><a class="idref" href="compcert.x86.Op.html#EVAL_INJECT.F"><span class="id" title="variable">F</span></a></span> of 
  internal function definitions, so that they apply both to CompCert C and to Clight. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="PROGRAMS"><span class="id" title="section">PROGRAMS</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="PROGRAMS.F"><span class="id" title="variable">F</span></a>: <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
Functions can either be defined (<span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a></span>) or declared as
  external functions (<span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a></span>). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="fundef"><span class="id" title="inductive">fundef</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Internal"><span class="id" title="constructor">Internal</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#PROGRAMS.F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a><br/>
&nbsp;&nbsp;| <a name="External"><span class="id" title="constructor">External</span></a>: <a class="idref" href="compcert.common.AST.html#external_function"><span class="id" title="inductive">external_function</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist"><span class="id" title="inductive">typelist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.AST.html#calling_convention"><span class="id" title="record">calling_convention</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a>.<br/>

<br/>
</div>

<div class="doc">
A program, or compilation unit, is composed of:
<ul class="doclist">
<li> a list of definitions of functions and global variables;

</li>
<li> the names of functions and global variables that are public (not static);

</li>
<li> the name of the function that acts as entry point ("main" function).

</li>
<li> a list of definitions for structure and union names

</li>
<li> the corresponding composite environment

</li>
<li> a proof that this environment is consistent with the definitions. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a name="program"><span class="id" title="record">program</span></a> : <span class="id" title="keyword">Type</span> := {<br/>
&nbsp;&nbsp;<a name="prog_defs"><span class="id" title="projection">prog_defs</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="compcert.common.AST.html#globdef"><span class="id" title="inductive">globdef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>));<br/>
&nbsp;&nbsp;<a name="prog_public"><span class="id" title="projection">prog_public</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>;<br/>
&nbsp;&nbsp;<a name="prog_main"><span class="id" title="projection">prog_main</span></a>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>;<br/>
&nbsp;&nbsp;<a name="prog_types"><span class="id" title="projection">prog_types</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>;<br/>
&nbsp;&nbsp;<a name="prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>;<br/>
&nbsp;&nbsp;<a name="prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="method">prog_types</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="method">prog_comp_env</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="program_of_program"><span class="id" title="definition">program_of_program</span></a> (<span class="id" title="var">p</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a>) : <a class="idref" href="compcert.common.AST.html#program"><span class="id" title="record">AST.program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">AST.prog_defs</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">prog_defs</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">AST.prog_public</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">prog_public</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">AST.prog_main</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">prog_main</span></a><a class="idref" href="compcert.common.AST.html#mkprogram"><span class="id" title="constructor">)</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a>: <span class="id" title="var">program</span> &gt;-&gt; <span class="id" title="var">AST.program</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a name="make_program"><span class="id" title="definition">make_program</span></a> (<span class="id" title="var">types</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">defs</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="compcert.common.AST.html#globdef"><span class="id" title="inductive">globdef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">public</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">main</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) : <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#types"><span class="id" title="variable">types</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> <span class="id" title="var">e</span> ⇒ <a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">ce</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> {| <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_defs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">defs</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_public</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">public</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_main</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">main</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_types</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">types</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_comp_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">ce</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_comp_env_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">_</span></a> |}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#PROGRAMS"><span class="id" title="section">PROGRAMS</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> {<span class="id" title="var">F</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Unset Implicit Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab182"></a><h1 class="section">Separate compilation and linking</h1>

<div class="paragraph"> </div>

<a name="lab183"></a><h2 class="section">Linking types</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <a name="Linker_types"><span class="id" title="instance">Linker_types</span></a> : <a class="idref" href="compcert.common.Linking.html#Linker"><span class="id" title="class">Linker</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type"><span class="id" title="inductive">type</span></a> := {<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t2"><span class="id" title="variable">t2</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#linkorder"><span class="id" title="method">linkorder</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#t2"><span class="id" title="variable">t2</span></a><br/>
}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>); <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Opaque</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Linker_types"><span class="id" title="instance">Linker_types</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab184"></a><h2 class="section">Linking composite definitions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_compat_composite"><span class="id" title="definition">check_compat_composite</span></a> (<span class="id" title="var">l</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) (<span class="id" title="var">cd</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">List.forallb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">cd'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd'"><span class="id" title="variable">cd'</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd"><span class="id" title="variable">cd</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_def_eq"><span class="id" title="definition">composite_def_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd"><span class="id" title="variable">cd</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd'"><span class="id" title="variable">cd'</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="filter_redefs"><span class="id" title="definition">filter_redefs</span></a> (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">names1</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">cd</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd"><span class="id" title="variable">cd</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#names1"><span class="id" title="variable">names1</span></a>)) <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="link_composite_defs"><span class="id" title="definition">link_composite_defs</span></a> (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">List.forallb</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#check_compat_composite"><span class="id" title="definition">check_compat_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#filter_redefs"><span class="id" title="definition">filter_redefs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="link_composite_def_inv"><span class="id" title="lemma">link_composite_def_inv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#link_composite_defs"><span class="id" title="definition">link_composite_defs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">cd1</span> <span class="id" title="var">cd2</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#filter_redefs"><span class="id" title="definition">filter_redefs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_composite_defs"><span class="id" title="definition">link_composite_defs</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#check_compat_composite"><span class="id" title="definition">check_compat_composite</span></a> <span class="id" title="var">l2</span>) <span class="id" title="var">l1</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">C</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">cd1</span> <span class="id" title="var">cd2</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <span class="id" title="var">l2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#forallb_forall"><span class="id" title="lemma">forallb_forall</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">C</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">C</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#check_compat_composite"><span class="id" title="definition">check_compat_composite</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#forallb_forall"><span class="id" title="lemma">forallb_forall</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>, <a class="idref" href="compcert.lib.Coqlib.html#dec_eq_true"><span class="id" title="lemma">dec_eq_true</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.lib.Coqlib.html#proj_sumbool_true"><span class="id" title="lemma">proj_sumbool_true</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#filter_redefs"><span class="id" title="definition">filter_redefs</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <span class="id" title="var">l1</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.lib.Coqlib.html#list_in_map_inv"><span class="id" title="lemma">list_in_map_inv</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">P</span> &amp; <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="Linker_composite_defs"><span class="id" title="instance">Linker_composite_defs</span></a> : <a class="idref" href="compcert.common.Linking.html#Linker"><span class="id" title="class">Linker</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a>) := {<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#link_composite_defs"><span class="id" title="definition">link_composite_defs</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#linkorder"><span class="id" title="method">linkorder</span></a> := @<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#incl"><span class="id" title="definition">List.incl</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_definition"><span class="id" title="inductive">composite_definition</span></a><br/>
}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#incl_refl"><span class="id" title="lemma">incl_refl</span></a>.<br/>
- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_composite_def_inv"><span class="id" title="lemma">link_composite_def_inv</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">A</span> &amp; <span class="id" title="var">B</span> &amp; <span class="id" title="var">C</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">C</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Connections with <span class="inlinecode"><a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="add_composite_definitions_append"><span class="id" title="lemma">add_composite_definitions_append</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">env</span> <span class="id" title="var">env''</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">env'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env''"><span class="id" title="variable">env''</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">env'</span> &amp; <span class="id" title="var">A</span> &amp; <span class="id" title="var">B</span>). <span class="id" title="tactic">congruence</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">env'</span> &amp; <span class="id" title="var">A</span> &amp; <span class="id" title="var">B</span>); <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_eq"><span class="id" title="lemma">composite_eq</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">su1</span> <span class="id" title="var">m1</span> <span class="id" title="var">a1</span> <span class="id" title="var">sz1</span> <span class="id" title="var">al1</span> <span class="id" title="var">r1</span> <span class="id" title="var">pos1</span> <span class="id" title="var">al2p1</span> <span class="id" title="var">szal1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">su2</span> <span class="id" title="var">m2</span> <span class="id" title="var">a2</span> <span class="id" title="var">sz2</span> <span class="id" title="var">al2</span> <span class="id" title="var">r2</span> <span class="id" title="var">pos2</span> <span class="id" title="var">al2p2</span> <span class="id" title="var">szal2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#su1"><span class="id" title="variable">su1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su2"><span class="id" title="variable">su2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sz1"><span class="id" title="variable">sz1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sz2"><span class="id" title="variable">sz2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al1"><span class="id" title="variable">al1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al2"><span class="id" title="variable">al2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">Build_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su1"><span class="id" title="variable">su1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sz1"><span class="id" title="variable">sz1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al1"><span class="id" title="variable">al1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos1"><span class="id" title="variable">pos1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al2p1"><span class="id" title="variable">al2p1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#szal1"><span class="id" title="variable">szal1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_composite"><span class="id" title="constructor">Build_composite</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su2"><span class="id" title="variable">su2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sz2"><span class="id" title="variable">sz2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al2"><span class="id" title="variable">al2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#pos2"><span class="id" title="variable">pos2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#al2p2"><span class="id" title="variable">al2p2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#szal2"><span class="id" title="variable">szal2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pos1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">pos2</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Axioms.html#proof_irr"><span class="id" title="axiom">proof_irr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">al2p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">al2p2</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Axioms.html#proof_irr"><span class="id" title="axiom">proof_irr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">szal1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">szal2</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.lib.Axioms.html#proof_irr"><span class="id" title="axiom">proof_irr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_of_def_eq"><span class="id" title="lemma">composite_of_def_eq</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>, <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">co</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_eq"><span class="id" title="lemma">composite_eq</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">C</span>, <span class="id" title="var">B</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_consistent_unique"><span class="id" title="lemma">composite_consistent_unique</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span> <span class="id" title="var">co1</span> <span class="id" title="var">co2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent"><span class="id" title="record">composite_consistent</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co2"><span class="id" title="variable">co2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co2"><span class="id" title="variable">co2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co2"><span class="id" title="variable">co2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co2"><span class="id" title="variable">co2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#co1"><span class="id" title="variable">co1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co2"><span class="id" title="variable">co2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">co1</span>, <span class="id" title="var">co2</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_eq"><span class="id" title="lemma">composite_eq</span></a>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="composite_of_def_stable"><span class="id" title="lemma">composite_of_def_stable</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">env</span> <span class="id" title="var">env'</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_env"><span class="id" title="definition">composite_env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">EXTENDS</span>: <span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <span class="id" title="var">co</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#su"><span class="id" title="variable">su</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <span class="id" title="var">env</span> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">CM</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="var">env'</span> <span class="id" title="var">id</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_su"><span class="id" title="projection">co_su</span></a> <span class="id" title="var">co</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_members"><span class="id" title="projection">co_members</span></a> <span class="id" title="var">co</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#co_attr"><span class="id" title="projection">co_attr</span></a> <span class="id" title="var">co</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def_eq"><span class="id" title="lemma">composite_of_def_eq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent_stable"><span class="id" title="lemma">composite_consistent_stable</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="link_add_composite_definitions"><span class="id" title="lemma">link_add_composite_definitions</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l0</span> <span class="id" title="var">env0</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l0"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l</span> <span class="id" title="var">env1</span> <span class="id" title="var">env1'</span> <span class="id" title="var">env2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env1'"><span class="id" title="variable">env1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l0"><span class="id" title="variable">l0</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">((</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">cd1</span> <span class="id" title="var">cd2</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l0"><span class="id" title="variable">l0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd2"><span class="id" title="variable">cd2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cd1"><span class="id" title="variable">cd1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">{</span></a> <span class="id" title="var">env2'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions"><span class="id" title="definition">add_composite_definitions</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#filter_redefs"><span class="id" title="definition">filter_redefs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l0"><span class="id" title="variable">l0</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">env2'</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env1'"><span class="id" title="variable">env1'</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">env2'</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env0"><span class="id" title="variable">env0</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">env2'</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">env2</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">ACD</span> <span class="id" title="var">AGREE1</span> <span class="id" title="var">AGREE0</span> <span class="id" title="var">AGREE2</span> <span class="id" title="var">UNIQUE</span>.<br/>
- <span class="id" title="var">inv</span> <span class="id" title="var">ACD</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">env2</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="var">env1</span> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span>|<span class="id" title="var">e</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">EQ</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">ACD</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">env1</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#complete_members"><span class="id" title="definition">complete_members</span></a> <span class="id" title="var">env1</span> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">CM1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">EQ1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <span class="id" title="var">l0</span>)); <span class="id" title="tactic">simpl</span>.<br/>
+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">eauto</span>.<br/>
× <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.lib.Coqlib.html#list_in_map_inv"><span class="id" title="lemma">list_in_map_inv</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> ([<span class="id" title="var">id'</span> <span class="id" title="var">su'</span> <span class="id" title="var">m'</span> <span class="id" title="var">a'</span>] &amp; <span class="id" title="var">P</span> &amp; <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">X</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Composite"><span class="id" title="constructor">Composite</span></a> <span class="id" title="var">id'</span> <span class="id" title="var">su'</span> <span class="id" title="var">m'</span> <span class="id" title="var">a'</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="var">UNIQUE</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">P</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env_charact"><span class="id" title="lemma">build_composite_env_charact</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> (<span class="id" title="var">co'</span> &amp; <span class="id" title="var">U</span> &amp; <span class="id" title="var">V</span> &amp; <span class="id" title="var">W</span> &amp; <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">co'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">co</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent_unique"><span class="id" title="lemma">composite_consistent_unique</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">env2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent_stable"><span class="id" title="lemma">composite_consistent_stable</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">env0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env_consistent"><span class="id" title="lemma">build_composite_env_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_consistent_stable"><span class="id" title="lemma">composite_consistent_stable</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">env1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ1</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">co'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">AGREE0</span>; <span class="id" title="tactic">auto</span>.<br/>
× <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">AGREE2</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id0</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <span class="id" title="var">l0</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">id0</span>. <span class="id" title="var">contradiction</span>.<br/>
+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">E2</span>: <span class="id" title="var">env2</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">AGREE2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#pred_dec_false"><span class="id" title="lemma">pred_dec_false</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E3</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def"><span class="id" title="definition">composite_of_def</span></a> <span class="id" title="var">env2</span> <span class="id" title="var">id</span> <span class="id" title="var">su</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#composite_of_def_stable"><span class="id" title="lemma">composite_of_def_stable</span></a>. <span class="id" title="tactic">eexact</span> <span class="id" title="var">AGREE1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E3</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">eauto</span>.<br/>
× <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">co</span>; <span class="id" title="tactic">rewrite</span> ! <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>); <span class="id" title="tactic">auto</span>.<br/>
× <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">co</span>; <span class="id" title="tactic">rewrite</span> ! <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">id0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">AGREE0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">congruence</span>.<br/>
× <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> ! <a class="idref" href="compcert.lib.Maps.html#PTree.gsspec"><span class="id" title="lemma">PTree.gsspec</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#peq"><span class="id" title="definition">peq</span></a> <span class="id" title="var">id0</span> <span class="id" title="var">id</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">id0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#pred_dec_false"><span class="id" title="lemma">pred_dec_false</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="link_build_composite_env"><span class="id" title="lemma">link_build_composite_env</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">l</span> <span class="id" title="var">env1</span> <span class="id" title="var">env2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">{</span></a> <span class="id" title="var">env</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <span class="id" title="var">env</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env1"><span class="id" title="variable">env1</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#env2"><span class="id" title="variable">env2</span></a><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">env</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">edestruct</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_composite_def_inv"><span class="id" title="lemma">link_composite_def_inv</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">A</span> &amp; <span class="id" title="var">B</span> &amp; <span class="id" title="var">C</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_add_composite_definitions"><span class="id" title="lemma">link_add_composite_definitions</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">env</span> &amp; <span class="id" title="var">P</span> &amp; <span class="id" title="var">Q</span> &amp; <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexact</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">env1</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gempty"><span class="id" title="lemma">PTree.gempty</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="compcert.common.AST.html#ident_eq"><span class="id" title="definition">ident_eq</span></a> <span class="id" title="var">id</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a> <span class="id" title="var">l1</span>)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#PTree.gempty"><span class="id" title="lemma">PTree.gempty</span></a>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">env1</span><a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><span class="id" title="var">id</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env_domain"><span class="id" title="lemma">build_composite_env_domain</span></a>. <span class="id" title="tactic">eexact</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_map"><span class="id" title="lemma">in_map</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#name_composite_def"><span class="id" title="definition">name_composite_def</span></a>) <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">env</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#add_composite_definitions_append"><span class="id" title="lemma">add_composite_definitions_append</span></a>. <span class="id" title="tactic">∃</span> <span class="id" title="var">env1</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab185"></a><h2 class="section">Linking function definitions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="link_fundef"><span class="id" title="definition">link_fundef</span></a> {<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">fd1</span> <span class="id" title="var">fd2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#fd1"><span class="id" title="variable">fd1</span></a>, <a class="idref" href="compcert.cfrontend.Ctypes.html#fd2"><span class="id" title="variable">fd2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">_</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> <span class="id" title="var">ef1</span> <span class="id" title="var">targs1</span> <span class="id" title="var">tres1</span> <span class="id" title="var">cc1</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> <span class="id" title="var">ef2</span> <span class="id" title="var">targs2</span> <span class="id" title="var">tres2</span> <span class="id" title="var">cc2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="compcert.common.AST.html#external_function_eq"><span class="id" title="definition">external_function_eq</span></a> <span class="id" title="var">ef1</span> <span class="id" title="var">ef2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist_eq"><span class="id" title="lemma">typelist_eq</span></a> <span class="id" title="var">targs1</span> <span class="id" title="var">targs2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <span class="id" title="var">tres1</span> <span class="id" title="var">tres2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.common.AST.html#calling_convention_eq"><span class="id" title="definition">calling_convention_eq</span></a> <span class="id" title="var">cc1</span> <span class="id" title="var">cc2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> <span class="id" title="var">ef1</span> <span class="id" title="var">targs1</span> <span class="id" title="var">tres1</span> <span class="id" title="var">cc1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">f</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> <span class="id" title="var">ef</span> <span class="id" title="var">targs</span> <span class="id" title="var">tres</span> <span class="id" title="var">cc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ef</span> <span class="id" title="keyword">with</span> <a class="idref" href="compcert.common.AST.html#EF_external"><span class="id" title="constructor">EF_external</span></a> <span class="id" title="var">id</span> <span class="id" title="var">sg</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">f</span>) | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> <span class="id" title="var">ef</span> <span class="id" title="var">targs</span> <span class="id" title="var">tres</span> <span class="id" title="var">cc</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">f</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">ef</span> <span class="id" title="keyword">with</span> <a class="idref" href="compcert.common.AST.html#EF_external"><span class="id" title="constructor">EF_external</span></a> <span class="id" title="var">id</span> <span class="id" title="var">sg</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <span class="id" title="var">f</span>) | <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="linkorder_fundef"><span class="id" title="inductive">linkorder_fundef</span></a> {<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>}: <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="linkorder_fundef_refl"><span class="id" title="constructor">linkorder_fundef_refl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">fd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#linkorder_fundef"><span class="id" title="inductive">linkorder_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fd"><span class="id" title="variable">fd</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fd"><span class="id" title="variable">fd</span></a><br/>
&nbsp;&nbsp;| <a name="linkorder_fundef_ext_int"><span class="id" title="constructor">linkorder_fundef_ext_int</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">f</span> <span class="id" title="var">id</span> <span class="id" title="var">sg</span> <span class="id" title="var">targs</span> <span class="id" title="var">tres</span> <span class="id" title="var">cc</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#linkorder_fundef"><span class="id" title="inductive">linkorder_fundef</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#External"><span class="id" title="constructor">External</span></a> (<a class="idref" href="compcert.common.AST.html#EF_external"><span class="id" title="constructor">EF_external</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#sg"><span class="id" title="variable">sg</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#targs"><span class="id" title="variable">targs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tres"><span class="id" title="variable">tres</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#cc"><span class="id" title="variable">cc</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#Internal"><span class="id" title="constructor">Internal</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="Linker_fundef"><span class="id" title="instance">Linker_fundef</span></a> (<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>): <a class="idref" href="compcert.common.Linking.html#Linker"><span class="id" title="class">Linker</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>) := {<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#link_fundef"><span class="id" title="definition">link_fundef</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#linkorder"><span class="id" title="method">linkorder</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#linkorder_fundef"><span class="id" title="inductive">linkorder_fundef</span></a><br/>
}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">constructor</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">constructor</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>, <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>.<br/>
+ <span class="id" title="tactic">discriminate</span>.<br/>
+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">inv</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>.<br/>
+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">inv</span> <span class="id" title="var">EQ</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>.<br/>
+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#external_function_eq"><span class="id" title="definition">external_function_eq</span></a> <span class="id" title="var">e</span> <span class="id" title="var">e0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist_eq"><span class="id" title="lemma">typelist_eq</span></a> <span class="id" title="var">t</span> <span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <span class="id" title="var">t0</span> <span class="id" title="var">t2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.common.AST.html#calling_convention_eq"><span class="id" title="definition">calling_convention_eq</span></a> <span class="id" title="var">c</span> <span class="id" title="var">c0</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">A</span>; <span class="id" title="var">inv</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">InvBooleans</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Remark</span> <a name="link_fundef_either"><span class="id" title="lemma">link_fundef_either</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">f</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>), <a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f2"><span class="id" title="variable">f2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_fundef"><span class="id" title="definition">link_fundef</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f1</span>, <span class="id" title="var">f2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.AST.html#external_function_eq"><span class="id" title="definition">external_function_eq</span></a> <span class="id" title="var">e</span> <span class="id" title="var">e0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#typelist_eq"><span class="id" title="lemma">typelist_eq</span></a> <span class="id" title="var">t</span> <span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <span class="id" title="var">t0</span> <span class="id" title="var">t2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#49ac24efa716d8b0ee8943bc1d1769a9"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="compcert.common.AST.html#calling_convention_eq"><span class="id" title="definition">calling_convention_eq</span></a> <span class="id" title="var">c</span> <span class="id" title="var">c0</span>); <span class="id" title="var">inv</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Opaque</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Linker_fundef"><span class="id" title="instance">Linker_fundef</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab186"></a><h2 class="section">Linking programs</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="lift_option"><span class="id" title="definition">lift_option</span></a> {<span class="id" title="var">A</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">opt</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">{</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">|</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#opt"><span class="id" title="variable">opt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5b63cb9ed0fed82566685c66e56592e4"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#f54393d7670a5aa26d6e138373d42f1c"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#f54393d7670a5aa26d6e138373d42f1c"><span class="id" title="notation">{</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#opt"><span class="id" title="variable">opt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#f54393d7670a5aa26d6e138373d42f1c"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">opt</span>. <span class="id" title="tactic">left</span>; <span class="id" title="tactic">∃</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="link_program"><span class="id" title="definition">link_program</span></a> {<span class="id" title="var">F</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#lift_option"><span class="id" title="definition">lift_option</span></a> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#inright"><span class="id" title="constructor">inright</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#inleft"><span class="id" title="constructor">inleft</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">typs</span> <span class="id" title="var">EQ</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_build_composite_env"><span class="id" title="lemma">link_build_composite_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a>) <span class="id" title="var">typs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a>) <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a>) <span class="id" title="var">EQ</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">env</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> {| <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_defs</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">AST.prog_defs</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_public</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">AST.prog_public</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_main</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">p</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">.(</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">AST.prog_main</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_types</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">typs</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_comp_env</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">env</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">prog_comp_env_eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#Build_program"><span class="id" title="constructor">P</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="linkorder_program"><span class="id" title="definition">linkorder_program</span></a> {<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">p1</span> <span class="id" title="var">p2</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#linkorder"><span class="id" title="method">linkorder</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">id</span> <span class="id" title="var">co</span>, <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a>)<a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a>.(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a>)<a class="idref" href="compcert.lib.Maps.html#e75e87027de4679a2bb49d0ac552f0e1"><span class="id" title="notation">!</span></a><a class="idref" href="compcert.cfrontend.Ctypes.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#co"><span class="id" title="variable">co</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="Linker_program"><span class="id" title="instance">Linker_program</span></a> (<span class="id" title="var">F</span>: <span class="id" title="keyword">Type</span>): <a class="idref" href="compcert.common.Linking.html#Linker"><span class="id" title="class">Linker</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#F"><span class="id" title="variable">F</span></a>) := {<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#link_program"><span class="id" title="definition">link_program</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#linkorder"><span class="id" title="method">linkorder</span></a> := <a class="idref" href="compcert.cfrontend.Ctypes.html#linkorder_program"><span class="id" title="definition">linkorder_program</span></a><br/>
}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="compcert.common.Linking.html#linkorder_refl"><span class="id" title="method">linkorder_refl</span></a>. <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.common.Linking.html#linkorder_trans"><span class="id" title="method">linkorder_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="tactic">until</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_program"><span class="id" title="definition">link_program</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">y</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">LP</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#lift_option"><span class="id" title="definition">lift_option</span></a> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">y</span>))) <span class="id" title="keyword">as</span> [[<span class="id" title="var">typs</span> <span class="id" title="var">EQ</span>]|<span class="id" title="var">EQ</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#link_build_composite_env"><span class="id" title="lemma">link_build_composite_env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">typs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">y</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">EQ</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">env</span> &amp; <span class="id" title="var">P</span> &amp; <span class="id" title="var">Q</span> &amp; <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.Linking.html#link_linkorder"><span class="id" title="method">link_linkorder</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">LP</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>; <span class="id" title="var">inv</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Opaque</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Linker_program"><span class="id" title="instance">Linker_program</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab187"></a><h2 class="section">Commutation between linking and program transformations</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="LINK_MATCH_PROGRAM"><span class="id" title="section">LINK_MATCH_PROGRAM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<span class="id" title="var">F</span> <span class="id" title="var">G</span>: <span class="id" title="keyword">Type</span>}.<br/>
<span class="id" title="keyword">Variable</span> <a name="LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a>: <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#fundef"><span class="id" title="inductive">fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Hypothesis</span> <a name="LINK_MATCH_PROGRAM.link_match_fundef"><span class="id" title="variable">link_match_fundef</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">f1</span> <span class="id" title="var">tf1</span> <span class="id" title="var">f2</span> <span class="id" title="var">tf2</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf1"><span class="id" title="variable">tf1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf2"><span class="id" title="variable">tf2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">tf</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf1"><span class="id" title="variable">tf1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf2"><span class="id" title="variable">tf2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf"><span class="id" title="variable">tf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf"><span class="id" title="variable">tf</span></a>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <a name="LINK_MATCH_PROGRAM.match_program"><span class="id" title="variable">match_program</span></a> (<span class="id" title="var">p</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.F"><span class="id" title="variable">F</span></a>) (<span class="id" title="var">tp</span>: <a class="idref" href="compcert.cfrontend.Ctypes.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.G"><span class="id" title="variable">G</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#match_program"><span class="id" title="definition">Linking.match_program</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ctx</span> <span class="id" title="var">f</span> <span class="id" title="var">tf</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf"><span class="id" title="variable">tf</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp"><span class="id" title="variable">tp</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="link_match_program"><span class="id" title="lemma">link_match_program</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">tp1</span> <span class="id" title="var">tp2</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_program"><span class="id" title="variable">match_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp1"><span class="id" title="variable">tp1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_program"><span class="id" title="variable">match_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp2"><span class="id" title="variable">tp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">tp</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp1"><span class="id" title="variable">tp1</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp2"><span class="id" title="variable">tp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_program"><span class="id" title="variable">match_program</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tp"><span class="id" title="variable">tp</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>.<br/>
<span class="id" title="keyword">Local Transparent</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Linker_program"><span class="id" title="instance">Linker_program</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_program"><span class="id" title="definition">link_program</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">p1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">p2</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">pp</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">LP</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">A</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">tpp</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">tp1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a> <span class="id" title="var">tp2</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tpp"><span class="id" title="variable">tpp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="compcert.common.Linking.html#match_program"><span class="id" title="definition">Linking.match_program</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ctx</span> <span class="id" title="var">f</span> <span class="id" title="var">tf</span> ⇒ <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.match_fundef"><span class="id" title="variable">match_fundef</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="compcert.cfrontend.Ctypes.html#tf"><span class="id" title="variable">tf</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">pp</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#tpp"><span class="id" title="variable">tpp</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="compcert.common.Linking.html#link_match_program"><span class="id" title="lemma">Linking.link_match_program</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">exploit</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM.link_match_fundef"><span class="id" title="variable">link_match_fundef</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span> (<span class="id" title="var">tf</span> &amp; <span class="id" title="var">A</span> &amp; <span class="id" title="var">B</span>). <span class="id" title="tactic">∃</span> <span class="id" title="var">tf</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local Transparent</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#Linker_types"><span class="id" title="instance">Linker_types</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×. <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#type_eq"><span class="id" title="lemma">type_eq</span></a> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>); <span class="id" title="var">inv</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#dec_eq_true"><span class="id" title="lemma">dec_eq_true</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="compcert.common.Linking.html#link_linkorder"><span class="id" title="method">link_linkorder</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">LP</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="compcert.common.Linking.html#link_linkorder"><span class="id" title="method">link_linkorder</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">LP</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">A</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">tpp</span> &amp; <span class="id" title="var">TLP</span> &amp; <span class="id" title="var">MP</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#link_program"><span class="id" title="definition">link_program</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">TLP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#lift_option"><span class="id" title="definition">lift_option</span></a> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">p1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">p2</span>))) <span class="id" title="keyword">as</span> [[<span class="id" title="var">typs</span> <span class="id" title="var">EQ</span>]|<span class="id" title="var">EQ</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#link_build_composite_env"><span class="id" title="lemma">link_build_composite_env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">p1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">p2</span>) <span class="id" title="var">typs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">p1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">p2</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">p2</span>) <span class="id" title="var">EQ</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">env</span> &amp; <span class="id" title="var">P</span> &amp; <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>, &lt;- <span class="id" title="var">H3</span> <span class="id" title="keyword">in</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#lift_option"><span class="id" title="definition">lift_option</span></a> (<a class="idref" href="compcert.common.Linking.html#link"><span class="id" title="method">link</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">tp1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">tp2</span>))) <span class="id" title="keyword">as</span> [[<span class="id" title="var">ttyps</span> <span class="id" title="var">EQ'</span>]|<span class="id" title="var">EQ'</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ttyps</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">typs</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">ttyps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.cfrontend.Ctypes.html#link_build_composite_env"><span class="id" title="lemma">link_build_composite_env</span></a> (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">tp1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_types"><span class="id" title="projection">prog_types</span></a> <span class="id" title="var">tp2</span>) <span class="id" title="var">typs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">tp1</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env"><span class="id" title="projection">prog_comp_env</span></a> <span class="id" title="var">tp2</span>) (<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">tp1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.cfrontend.Ctypes.html#prog_comp_env_eq"><span class="id" title="projection">prog_comp_env_eq</span></a> <span class="id" title="var">tp2</span>) <span class="id" title="var">EQ'</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">tenv</span> &amp; <span class="id" title="var">R</span> &amp; <span class="id" title="var">S</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tenv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">env</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">tenv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#program_of_program"><span class="id" title="definition">program_of_program</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pp</span>, <span class="id" title="var">tpp</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">MP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#LINK_MATCH_PROGRAM"><span class="id" title="section">LINK_MATCH_PROGRAM</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>