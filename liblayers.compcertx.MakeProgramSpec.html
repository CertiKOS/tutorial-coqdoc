<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>liblayers.compcertx.MakeProgramSpec</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library liblayers.compcertx.MakeProgramSpec</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="compcert.lib.Coqlib.html#"><span class="id" title="library">compcert.lib.Coqlib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="compcert.common.Values.html#"><span class="id" title="library">compcert.common.Values</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="compcert.common.AST.html#"><span class="id" title="library">compcert.common.AST</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="compcert.common.Globalenvs.html#"><span class="id" title="library">compcert.common.Globalenvs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.lib.OptionMonad.html#"><span class="id" title="library">liblayers.lib.OptionMonad</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.logic.Modules.html#"><span class="id" title="library">liblayers.logic.Modules</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.logic.Layers.html#"><span class="id" title="library">liblayers.logic.Layers</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.logic.Semantics.html#"><span class="id" title="library">liblayers.logic.Semantics</span></a>. <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.compcertx.CompcertStructures.html#"><span class="id" title="library">liblayers.compcertx.CompcertStructures</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#"><span class="id" title="library">liblayers.compcertx.ErrorMonad</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab490"></a><h1 class="section">Prerequisites</h1>

<div class="paragraph"> </div>

 The class below specifies the prerequisites for our implementation
  of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="record">MakeProgram</span></a></span>. Basically, we need to know how to convert the
  definition in modules and layers into Compcert program definitions.

<div class="paragraph"> </div>

  Note that the types of function and variable definitions in the
  produced program are not always related to the types of definitions
  in our modules and layers. For instance, in order to be able to use
  our layers to construct C as well as assembly programs, their global
  variable definitions need to store C-style typing information. When
  building assembly programs they will be converted into low-level
  types. Hence, we need to distinguish between to output program types
  <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a></span> and <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp"><span class="id" title="variable">Vp</span></a></span>, and the types used in the module and layer <span class="inlinecode"><a class="idref" href="compcert.flocq.Appli.Fappli_rnd_odd.html#Fm"><span class="id" title="lemma">Fm</span></a></span> and <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a></span>.

<div class="paragraph"> </div>

  Another difficulty that arises because of the discrepency between
  our view and Compcert's is related to what a function definitions is:
  Compcert's internal functions correspond to functions defined in our
  modules, whereas external functions correspond to the primitives
  defined in layer interfaces. 

<div class="paragraph"> </div>

  In our case, 

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="ProgramFormatOps"><span class="id" title="record">ProgramFormatOps</span></a> {<span class="id" title="var">layerdata</span>} (<span class="id" title="var">Fm</span> <span class="id" title="var">Vm</span> <span class="id" title="var">Fp</span> <span class="id" title="var">Vp</span>: <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">module</span>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">layer_ops</span>: <a class="idref" href="liblayers.logic.Layers.html#LayerOps"><span class="id" title="class">LayerOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layerdata"><span class="id" title="variable">layerdata</span></a> <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">AST.ident</span></a> (<span class="id" title="var">V</span> := <a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">AST.globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">module_ops</span>: <a class="idref" href="liblayers.logic.Modules.html#ModuleOps"><span class="id" title="class">ModuleOps</span></a> <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">AST.ident</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> (<a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">AST.globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a>) <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module"><span class="id" title="variable">module</span></a>}<br/>
&nbsp;:=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_internal"><span class="id" title="projection">make_internal</span></a>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_external"><span class="id" title="projection">make_external</span></a> <span class="id" title="var">D</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">AST.ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_varinfo"><span class="id" title="projection">make_varinfo</span></a>: <a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> (<a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp"><span class="id" title="variable">Vp</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="ProgramFormat"><span class="id" title="record">ProgramFormat</span></a> {<span class="id" title="var">layerdata</span> <span class="id" title="var">simrel</span>} <span class="id" title="var">Fm</span> <span class="id" title="var">Vm</span> <span class="id" title="var">Fp</span> <span class="id" title="var">Vp</span><br/>
&nbsp;&nbsp;`{<span class="id" title="var">pf_ops</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layerdata"><span class="id" title="variable">layerdata</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp"><span class="id" title="variable">Vp</span></a>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">rg_ops</span>: !<a class="idref" href="liblayers.logic.LayerData.html#CategoryOps"><span class="id" title="class">CategoryOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layerdata"><span class="id" title="variable">layerdata</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#simrel"><span class="id" title="variable">simrel</span></a>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">psim_ops</span>: <a class="idref" href="liblayers.logic.Structures.html#Sim"><span class="id" title="class">Sim</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layerdata"><span class="id" title="variable">layerdata</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#simrel"><span class="id" title="variable">simrel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">lsim_ops</span>: <a class="idref" href="liblayers.logic.Structures.html#Sim"><span class="id" title="class">Sim</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layerdata"><span class="id" title="variable">layerdata</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#simrel"><span class="id" title="variable">simrel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layer"><span class="id" title="variable">layer</span></a>} :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_external_monotonic"><span class="id" title="projection">make_external_monotonic</span></a> {<span class="id" title="var">D</span>} :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_external"><span class="id" title="method">make_external</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="coqrel.RelDefinitions.html#e7acdf91669d82873f44a60e56ad44ff"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="liblayers.logic.Structures.html#720b83680399fc5a022f578f28e994fa"><span class="id" title="notation">(≤)</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Often used when defining <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_varinfo"><span class="id" title="projection">make_varinfo</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="globvar_map"><span class="id" title="definition">globvar_map</span></a> {<span class="id" title="var">Vm</span> <span class="id" title="var">Vp</span>} (<span class="id" title="var">f</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm"><span class="id" title="variable">Vm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp"><span class="id" title="variable">Vp</span></a>) <span class="id" title="var">gt</span> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_info</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">f</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">(</span></a><a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_info</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">gt</span></a><a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_init</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_init</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">gt</span></a><a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_readonly</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_readonly</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">gt</span></a><a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_volatile</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">:=</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">AST.gvar_volatile</span></a> <a class="idref" href="compcert.common.AST.html#mkglobvar"><span class="id" title="constructor">gt</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab491"></a><h1 class="section">Relations</h1>

<div class="paragraph"> </div>

 The most important property of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span> takes the form a
  relational parametricity theorem: module-layer pairs that are
  related in a given way will yield programs that are related in a
  corresponding way. The devil is in the details of what we by
  "related in a given way" and "related in a corresponding way".

<div class="paragraph"> </div>

  If fact, we will use general specifications of how function
  definitions are to be related. From a relation this kind (<span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a></span>),
  we will derive both a relation on module-layer pairs (using
  <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a></span> defined below), and a relation on programs
  (using an appropriate parameter for <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_le"><span class="id" title="definition">program_le</span></a></span>).

<div class="paragraph"> </div>

  The first step is to define some accessors for handling module-layer
  pairs as a whole. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="MODULE_LAYER_ACCESS"><span class="id" title="section">MODULE_LAYER_ACCESS</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hpf</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormat"><span class="id" title="class">ProgramFormat</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="res_option_inj"><span class="id" title="definition">res_option_inj</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">x</span>: <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A"><span class="id" title="variable">A</span></a>)) (<span class="id" title="var">y</span>: <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B"><span class="id" title="variable">B</span></a>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B"><span class="id" title="variable">B</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#x"><span class="id" title="variable">x</span></a>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>), <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>) ⇒ <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="compcert.common.Errors.html#Error"><span class="id" title="constructor">Error</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="get_module_layer_function"><span class="id" title="definition">get_module_layer_function</span></a> {<span class="id" title="var">D</span>} <span class="id" title="var">i</span> (<span class="id" title="var">ML</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MODULE_LAYER_ACCESS.module"><span class="id" title="variable">module</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MODULE_LAYER_ACCESS.layer"><span class="id" title="variable">layer</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#res_option_inj"><span class="id" title="definition">res_option_inj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Modules.html#get_module_function"><span class="id" title="method">get_module_function</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML"><span class="id" title="variable">ML</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Layers.html#get_layer_primitive"><span class="id" title="method">get_layer_primitive</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML"><span class="id" title="variable">ML</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="get_module_layer_variable"><span class="id" title="definition">get_module_layer_variable</span></a> {<span class="id" title="var">D</span>} <span class="id" title="var">i</span> (<span class="id" title="var">ML</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MODULE_LAYER_ACCESS.module"><span class="id" title="variable">module</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MODULE_LAYER_ACCESS.layer"><span class="id" title="variable">layer</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Modules.html#get_module_variable"><span class="id" title="method">get_module_variable</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML"><span class="id" title="variable">ML</span></a>)<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.logic.Layers.html#get_layer_globalvar"><span class="id" title="method">get_layer_globalvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML"><span class="id" title="variable">ML</span></a>)<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MODULE_LAYER_ACCESS"><span class="id" title="section">MODULE_LAYER_ACCESS</span></a>.<br/>

<br/>
</div>

<div class="doc">
Those should be moved to coqrel? 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="OptionRelationForward"><span class="id" title="record">OptionRelationForward</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B"><span class="id" title="variable">B</span></a>)) :=<br/>
&nbsp;&nbsp;<a name="option_rel_fw"><span class="id" title="projection">option_rel_fw</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="HasImage"><span class="id" title="record">HasImage</span></a> {<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span>} (<span class="id" title="var">RA</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a>) (π1: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B1"><span class="id" title="variable">B1</span></a>) (π2: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B2"><span class="id" title="variable">B2</span></a>) (<span class="id" title="var">RB</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B1"><span class="id" title="variable">B1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B2"><span class="id" title="variable">B2</span></a>) :=<br/>
&nbsp;&nbsp;<a name="has_image"><span class="id" title="projection">has_image</span></a>: (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#8e0902a5e6df5e2a858a0750f5297a93"><span class="id" title="variable">π1</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#7c0bc160b6883dc4250dd1bb299421c2"><span class="id" title="variable">π2</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>)%<span class="id" title="var">rel</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RA"><span class="id" title="variable">RA</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RB"><span class="id" title="variable">RB</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="rel_proj"><span class="id" title="inductive">rel_proj</span></a> {<span class="id" title="var">A1</span> <span class="id" title="var">B1</span>} (π1: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B1"><span class="id" title="variable">B1</span></a>) {<span class="id" title="var">A2</span> <span class="id" title="var">B2</span>} (π2: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B2"><span class="id" title="variable">B2</span></a>) (<span class="id" title="var">R</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a>): <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> :=<br/>
&nbsp;&nbsp;<a name="rel_proj_intro"><span class="id" title="constructor">rel_proj_intro</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> <span class="id" title="var">R</span> π1 π2 (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a> π1 π2 <span class="id" title="var">R</span>).<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">rel_proj_intro</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="rel_proj_rel"><span class="id" title="instance">rel_proj_rel</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">-,</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">-,</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">forallr</span></a> <a class="idref" href="coqrel.Relators.html#121f19e13d350c3a792fb7c67ae4a001"><span class="id" title="notation">-,</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="coqrel.RelDefinitions.html#subrel"><span class="id" title="definition">subrel</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">R</span> <span class="id" title="var">R'</span> <span class="id" title="var">HR</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> π1 π1' <span class="id" title="var">H</span>π1 π2 π2' <span class="id" title="var">H</span>π2 <span class="id" title="var">x</span> <span class="id" title="var">yi</span> <span class="id" title="var">Hxy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hxy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_proj_fw"><span class="id" title="lemma">rel_proj_fw</span></a> {<span class="id" title="var">A1</span> <span class="id" title="var">B1</span> <span class="id" title="var">A2</span> <span class="id" title="var">B2</span>} <span class="id" title="var">R</span> π1 π2:<br/>
&nbsp;&nbsp;@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B1"><span class="id" title="variable">B1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B2"><span class="id" title="variable">B2</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a> (<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#8e0902a5e6df5e2a858a0750f5297a93"><span class="id" title="variable">π1</span></a>) (<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#7c0bc160b6883dc4250dd1bb299421c2"><span class="id" title="variable">π2</span></a>) <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HR</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a2</span> <span class="id" title="var">b2</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hb2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">Ha</span> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Hb</span> <span class="id" title="var">H1</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">Ha</span>|]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b1</span> <span class="id" title="var">b2</span> <span class="id" title="var">Hb</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#option_rel_fw"><span class="id" title="definition">option_rel_fw</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 1 (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj_fw"><span class="id" title="lemma">rel_proj_fw</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="RELATIONS"><span class="id" title="section">RELATIONS</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">ld1</span> <span class="id" title="var">Fm1</span> <span class="id" title="var">Vm1</span> <span class="id" title="var">Fp1</span> <span class="id" title="var">Vp1</span> <span class="id" title="var">module1</span> <span class="id" title="var">primsem1</span> <span class="id" title="var">layer1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops1</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ld1"><span class="id" title="variable">ld1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm1"><span class="id" title="variable">Fm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm1"><span class="id" title="variable">Vm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp1"><span class="id" title="variable">Fp1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp1"><span class="id" title="variable">Vp1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module1"><span class="id" title="variable">module1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem1"><span class="id" title="variable">primsem1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layer1"><span class="id" title="variable">layer1</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">ld2</span> <span class="id" title="var">Fm2</span> <span class="id" title="var">Vm2</span> <span class="id" title="var">Fp2</span> <span class="id" title="var">Vp2</span> <span class="id" title="var">module2</span> <span class="id" title="var">primsem2</span> <span class="id" title="var">layer2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops2</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ld2"><span class="id" title="variable">ld2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm2"><span class="id" title="variable">Fm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vm2"><span class="id" title="variable">Vm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp2"><span class="id" title="variable">Fp2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp2"><span class="id" title="variable">Vp2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module2"><span class="id" title="variable">module2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem2"><span class="id" title="variable">primsem2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layer2"><span class="id" title="variable">layer2</span></a>}.<br/>

<br/>
</div>

<div class="doc">
A function definition can either be an internal definition as
    found in modules (given by the type parameter <span class="inlinecode"><a class="idref" href="compcert.flocq.Appli.Fappli_rnd_odd.html#Fm"><span class="id" title="lemma">Fm</span></a></span> in
    <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="record">ProgramFormatOps</span></a></span>) or an external definition corresponding to a
    primitive specification (of the type <span class="inlinecode"><a class="idref" href="liblayers.logic.Primitives.html#primsem"><span class="id" title="variable">primsem</span></a></span>). We allow the user
    to specify a different relation at each identifier, which means we
    can have a fairly precise <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="funrel"><span class="id" title="definition">funrel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops1</span>: !<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm1"><span class="id" title="variable">Fm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm1"><span class="id" title="variable">Vm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fp1"><span class="id" title="variable">Fp1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vp1"><span class="id" title="variable">Vp1</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops2</span>: !<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm2"><span class="id" title="variable">Fm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm2"><span class="id" title="variable">Vm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fp2"><span class="id" title="variable">Fp2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vp2"><span class="id" title="variable">Vp2</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D1</span> <span class="id" title="var">D2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm1"><span class="id" title="variable">Fm1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.primsem1"><span class="id" title="variable">primsem1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a>)%<span class="id" title="var">type</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm2"><span class="id" title="variable">Fm2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.primsem2"><span class="id" title="variable">primsem2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>))%<span class="id" title="var">type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="varrel"><span class="id" title="definition">varrel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops1</span>: !<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm1"><span class="id" title="variable">Fm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm1"><span class="id" title="variable">Vm1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fp1"><span class="id" title="variable">Fp1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vp1"><span class="id" title="variable">Vp1</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">pf_ops2</span>: !<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm2"><span class="id" title="variable">Fm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm2"><span class="id" title="variable">Vm2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fp2"><span class="id" title="variable">Fp2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vp2"><span class="id" title="variable">Vp2</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm1"><span class="id" title="variable">Vm1</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="compcert.common.AST.html#globvar"><span class="id" title="record">globvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm2"><span class="id" title="variable">Vm2</span></a>)).<br/>

<br/>
</div>

<div class="doc">
From such a relation (family) <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#Rf"><span class="id" title="variable">Rf</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#D1"><span class="id" title="variable">D1</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#D2"><span class="id" title="variable">D2</span></a></span>, we can derive
    the corresponding relation on module-layer pairs,
    <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#D1"><span class="id" title="variable">D1</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.logic.Structures.html#D2"><span class="id" title="variable">D2</span></a></span> <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#Rf"><span class="id" title="variable">Rf</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> (<span class="id" title="var">RF</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>) (<span class="id" title="var">RV</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#varrel"><span class="id" title="definition">varrel</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.module1"><span class="id" title="variable">module1</span></a> <a class="idref" href="liblayers.lib.Functor.html#3c95d747e965984bdabf05c6b0e23759"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.layer1"><span class="id" title="variable">layer1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a>)%<span class="id" title="var">type</span> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.module2"><span class="id" title="variable">module2</span></a> <a class="idref" href="liblayers.lib.Functor.html#3c95d747e965984bdabf05c6b0e23759"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.layer2"><span class="id" title="variable">layer2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>)%<span class="id" title="var">type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">ML1</span> <span class="id" title="var">ML2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_function"><span class="id" title="definition">get_module_layer_function</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML1"><span class="id" title="variable">ML1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_function"><span class="id" title="definition">get_module_layer_function</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML2"><span class="id" title="variable">ML2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RV"><span class="id" title="variable">RV</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_variable"><span class="id" title="definition">get_module_layer_variable</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML1"><span class="id" title="variable">ML1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_variable"><span class="id" title="definition">get_module_layer_variable</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML2"><span class="id" title="variable">ML2</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="get_module_layer_function_rel"><span class="id" title="instance">get_module_layer_function_rel</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RF</span> <span class="id" title="var">RV</span> <span class="id" title="var">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_function"><span class="id" title="definition">get_module_layer_function</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RV"><span class="id" title="variable">RV</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="get_module_layer_function_rel_params"><span class="id" title="instance">get_module_layer_function_rel_params</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_function"><span class="id" title="definition">get_module_layer_function</span></a>) 1.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="get_module_layer_variable_rel"><span class="id" title="instance">get_module_layer_variable_rel</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RF</span> <span class="id" title="var">RV</span> <span class="id" title="var">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_variable"><span class="id" title="definition">get_module_layer_variable</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RV"><span class="id" title="variable">RV</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RV"><span class="id" title="variable">RV</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="get_module_layer_variable_rel_params"><span class="id" title="instance">get_module_layer_variable_rel_params</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#get_module_layer_variable"><span class="id" title="definition">get_module_layer_variable</span></a>) 1.<br/>

<br/>
</div>

<div class="doc">
We can also derive a relation on program definitions, this time
    indexed by blocks, suitable for <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_le"><span class="id" title="definition">program_le</span></a></span> or <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#genv_le"><span class="id" title="definition">genv_le</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="make_fundef"><span class="id" title="definition">make_fundef</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span> <span class="id" title="var">i</span> (<span class="id" title="var">d</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a>): <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">fi</span> ⇒ <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_internal"><span class="id" title="method">make_internal</span></a> <span class="id" title="var">fi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">fe</span> ⇒ <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_external"><span class="id" title="method">make_external</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="var">fe</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="match_fundef"><span class="id" title="definition">match_fundef</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span> <span class="id" title="var">i</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#d'"><span class="id" title="variable">d'</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="match_vardef"><span class="id" title="definition">match_vardef</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">d</span> <span class="id" title="var">d'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_varinfo"><span class="id" title="method">make_varinfo</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#d'"><span class="id" title="variable">d'</span></a>.<br/>

<br/>
</div>

<div class="doc">
While we can use a wide range of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a></span> and <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#varrel"><span class="id" title="definition">varrel</span></a></span> to encode
    different situations, we do have some restrictions. In particular,
    adding more definitions may trigger an error condition, which is
    only allowed by <span class="inlinecode"><a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a></span> to appear on the right, or both
    sides. Hence, while we allow <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a></span> on the left to be related to
    <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span> on the right, we use <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="record">OptionRelationForward</span></a></span> to forbid the
    opposite situation.

<div class="paragraph"> </div>

    Then, we require that the relations on programs contain the image
    of the relations on modules as defined using <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a></span> and
    <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_vardef"><span class="id" title="definition">match_vardef</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="MakeProgramRelations"><span class="id" title="record">MakeProgramRelations</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RFm</span> <span class="id" title="var">RVm</span> <span class="id" title="var">RFp</span> <span class="id" title="var">RVp</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_function_relation_fw"><span class="id" title="projection">make_program_function_relation_fw</span></a> <span class="id" title="var">i</span> :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_variable_relation_fw"><span class="id" title="projection">make_program_variable_relation_fw</span></a> <span class="id" title="var">i</span> :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_function_relations"><span class="id" title="projection">make_program_function_relations</span></a> <span class="id" title="var">i</span> :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> (<span class="id" title="var">Fm</span>:=<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm1"><span class="id" title="variable">Fm1</span></a>) <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> (<span class="id" title="var">Fm</span>:=<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Fm2"><span class="id" title="variable">Fm2</span></a>) <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_variable_relations"><span class="id" title="projection">make_program_variable_relations</span></a> (<span class="id" title="var">i</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a>) :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_vardef"><span class="id" title="definition">match_vardef</span></a> (<span class="id" title="var">Vm</span>:=<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm1"><span class="id" title="variable">Vm1</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_vardef"><span class="id" title="definition">match_vardef</span></a> (<span class="id" title="var">Vm</span>:=<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS.Vm2"><span class="id" title="variable">Vm2</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVp"><span class="id" title="variable">RVp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_fundef_error"><span class="id" title="projection">make_fundef_error</span></a> <span class="id" title="var">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_vardef_error"><span class="id" title="projection">make_vardef_error</span></a> <span class="id" title="var">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_varinfo"><span class="id" title="method">make_varinfo</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
One specific way to construct relations which satisfy the
    <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="record">HasImage</span></a></span> constraints above is to simply use <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a></span> to
    compute the image in question. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="fundef_rel"><span class="id" title="definition">fundef_rel</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> (<span class="id" title="var">RF</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#funrel"><span class="id" title="definition">funrel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>) <span class="id" title="var">i</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">_</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="vardef_rel"><span class="id" title="definition">vardef_rel</span></a> (<span class="id" title="var">RV</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#varrel"><span class="id" title="definition">varrel</span></a>) <span class="id" title="var">i</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">_</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_vardef"><span class="id" title="definition">match_vardef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_vardef"><span class="id" title="definition">match_vardef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RV"><span class="id" title="variable">RV</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>).<br/>

<br/>
</div>

<div class="doc">
Establishing <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="record">MakeProgramRelations</span></a></span> then boils down to proving
    the <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="record">OptionRelationForward</span></a></span> conditions. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="foodef_rel_mpr"><span class="id" title="instance">foodef_rel_mpr</span></a> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RFm</span> <span class="id" title="var">RVm</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_varinfo"><span class="id" title="method">make_varinfo</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#fundef_rel"><span class="id" title="definition">fundef_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#vardef_rel"><span class="id" title="definition">vardef_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HRFm</span> <span class="id" title="var">HRVm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> [ <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> | <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RELATIONS"><span class="id" title="section">RELATIONS</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Extern</span> 2 (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#fundef_rel"><span class="id" title="definition">fundef_rel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#vardef_rel"><span class="id" title="definition">vardef_rel</span></a> <span class="id" title="var">_</span>)) ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#foodef_rel_mpr"><span class="id" title="instance">foodef_rel_mpr</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab492"></a><h1 class="section">Specification of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span></h1>

<div class="paragraph"> </div>

 From and instance of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="record">ProgramFormatOps</span></a></span> and a module-layer pair,
  <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span> attempts to build a Compcert program. We also define
  the compound <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a></span>, which builds a Compcert global
  environment from the program in quesion. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="MakeProgramOps"><span class="id" title="record">MakeProgramOps</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program"><span class="id" title="projection">make_program</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module"><span class="id" title="variable">module</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#layer"><span class="id" title="variable">layer</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.common.Errors.html#res"><span class="id" title="inductive">res</span></a> (<a class="idref" href="compcert.common.AST.html#program"><span class="id" title="record">program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fp"><span class="id" title="variable">Fp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Vp"><span class="id" title="variable">Vp</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="make_globalenv"><span class="id" title="definition">make_globalenv</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramOps"><span class="id" title="class">MakeProgramOps</span></a>} `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span> <span class="id" title="var">ML</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> <a class="idref" href="liblayers.lib.Monad.html#9de03680d7b45b7f84bb39e0173c68a2"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ML"><span class="id" title="variable">ML</span></a><a class="idref" href="liblayers.lib.Monad.html#9de03680d7b45b7f84bb39e0173c68a2"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.lib.Monad.html#ret"><span class="id" title="method">ret</span></a> (<a class="idref" href="compcert.common.Globalenvs.html#Genv.globalenv"><span class="id" title="definition">Genv.globalenv</span></a> <span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
For most part, the specification of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span> consists in a
  relational parametricity property expressed using the relations
  defined above. We also use the following inductive type to express
  the property that if <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span> succeeds, then there should have
  been no conflict between the function and variables in the module
  and layer. 
<div class="paragraph"> </div>

 We are now ready to give the specification of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="projection">make_program</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a name="MakeProgram"><span class="id" title="record">MakeProgram</span></a> `{<span class="id" title="var">mkp_ops</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramOps"><span class="id" title="class">MakeProgramOps</span></a>} :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_rel"><span class="id" title="projection">make_program_rel</span></a> `(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a>) :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_rel"><span class="id" title="record">program_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVp"><span class="id" title="variable">RVp</span></a>));<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_noconflict"><span class="id" title="projection">make_program_noconflict</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Semantics.html#noconflict"><span class="id" title="inductive">noconflict</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Modules.html#get_module_function"><span class="id" title="method">get_module_function</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Modules.html#get_module_variable"><span class="id" title="method">get_module_variable</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Layers.html#get_layer_primitive"><span class="id" title="method">get_layer_primitive</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.logic.Layers.html#get_layer_globalvar"><span class="id" title="method">get_layer_globalvar</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L"><span class="id" title="variable">L</span></a>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_public_incl"><span class="id" title="projection">make_program_public_incl</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D</span> <span class="id" title="var">M</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M"><span class="id" title="variable">M</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L"><span class="id" title="variable">L</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> (<a class="idref" href="compcert.common.AST.html#prog_public"><span class="id" title="projection">AST.prog_public</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p"><span class="id" title="variable">p</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="compcert.common.AST.html#prog_defs"><span class="id" title="projection">AST.prog_defs</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p"><span class="id" title="variable">p</span></a>));<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="make_program_public_eq"><span class="id" title="projection">make_program_public_eq</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">L1</span> <span class="id" title="var">L2</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M1"><span class="id" title="variable">M1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L1"><span class="id" title="variable">L1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#M2"><span class="id" title="variable">M2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#L2"><span class="id" title="variable">L2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p2"><span class="id" title="variable">p2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.common.AST.html#prog_public"><span class="id" title="projection">AST.prog_public</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.AST.html#prog_public"><span class="id" title="projection">AST.prog_public</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#p2"><span class="id" title="variable">p2</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="make_program_rel_params"><span class="id" title="instance">make_program_rel_params</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a>) 1.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="make_globalenv_rel"><span class="id" title="instance">make_globalenv_rel</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="class">MakeProgram</span></a>} `(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVm"><span class="id" title="variable">RVm</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.CompcertStructures.html#genv_rel"><span class="id" title="record">genv_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RVp"><span class="id" title="variable">RVp</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="make_globalenv_rel_params"><span class="id" title="instance">make_globalenv_rel_params</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a>) 1.<br/>

<br/>
</div>

<div class="doc">
We can also introduce variants of the relational property based on
  <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_le"><span class="id" title="definition">program_le</span></a></span> and <span class="inlinecode"><a class="idref" href="liblayers.compcertx.CompcertStructures.html#genv_le"><span class="id" title="definition">genv_le</span></a></span>, which are less general but more
  convenient to use in many contexts. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="module_layer_le"><span class="id" title="definition">module_layer_le</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RF</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_rel"><span class="id" title="definition">module_layer_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fundef_le"><span class="id" title="definition">fundef_le</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormatOps"><span class="id" title="class">ProgramFormatOps</span></a>} <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RF</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#rel_proj"><span class="id" title="inductive">rel_proj</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RF"><span class="id" title="variable">RF</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="option_le_has_image"><span class="id" title="instance">option_le_has_image</span></a> {<span class="id" title="var">A1</span> <span class="id" title="var">B1</span>} (π1: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B1"><span class="id" title="variable">B1</span></a>) {<span class="id" title="var">A2</span> <span class="id" title="var">B2</span>} (π2: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B2"><span class="id" title="variable">B2</span></a>) <span class="id" title="var">R</span> <span class="id" title="var">R'</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#8e0902a5e6df5e2a858a0750f5297a93"><span class="id" title="variable">π1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#7c0bc160b6883dc4250dd1bb299421c2"><span class="id" title="variable">π2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R'"><span class="id" title="variable">R'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> (<a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a>) (<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#8e0902a5e6df5e2a858a0750f5297a93"><span class="id" title="variable">π1</span></a>) (<a class="idref" href="coqrel.Relators.html#option_rel"><span class="id" title="inductive">option_rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#7c0bc160b6883dc4250dd1bb299421c2"><span class="id" title="variable">π2</span></a>) (<a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R'"><span class="id" title="variable">R'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span> <span class="id" title="var">H1</span> <span class="id" title="var">x2</span> <span class="id" title="var">y2</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#has_image"><span class="id" title="definition">has_image</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="option_le_fw"><span class="id" title="instance">option_le_fw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">R</span>: <a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#B"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="class">OptionRelationForward</span></a> (<a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#R"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? [<span class="id" title="var">x</span> | <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">Hxy</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We're careful not to register these instances of <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="record">MakeProgramRelations</span></a></span>
  too widely because otherwise it's used for solving <span class="inlinecode"><a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a></span> <span class="inlinecode">→</span>
  <span class="inlinecode"><a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#OptionRelationForward"><span class="id" title="record">OptionRelationForward</span></a></span> <span class="inlinecode">(<a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a></span> <span class="inlinecode"><a class="idref" href="compcert.x86.Asm.html#PregEq.eq"><span class="id" title="definition">eq</span></a>)</span> and leave us with
  uninstantiated evars as a result. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Instance</span> <a name="option_le_mpr"><span class="id" title="instance">option_le_mpr</span></a> `{<span class="id" title="var">Hpf</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormat"><span class="id" title="class">ProgramFormat</span></a>} <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RFm</span> <span class="id" title="var">RFp</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Himg</span> <span class="id" title="var">Herr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">v1m</span> <span class="id" title="var">v1p</span> <span class="id" title="var">Hv1</span> <span class="id" title="var">v2m</span> <span class="id" title="var">v2p</span> <span class="id" title="var">Hv2</span> <span class="id" title="var">Hvm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv1</span>, <span class="id" title="var">Hv2</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvm</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hf</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">xf1</span> <span class="id" title="var">xf2</span> <span class="id" title="var">Hf'</span>]; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hf</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Herr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Instance</span> <a name="fundef_le_mpr"><span class="id" title="instance">fundef_le_mpr</span></a> `{<span class="id" title="var">Hpf</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormat"><span class="id" title="class">ProgramFormat</span></a>} <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RFm</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgramRelations"><span class="id" title="class">MakeProgramRelations</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#fundef_le"><span class="id" title="definition">fundef_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="liblayers.logic.OptionOrders.html#option_le"><span class="id" title="inductive">option_le</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="make_program_le"><span class="id" title="instance">make_program_le</span></a> `{<span class="id" title="var">Hmkp</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="class">MakeProgram</span></a>} `{<span class="id" title="var">Hpf</span>: <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormat"><span class="id" title="class">ProgramFormat</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> (<span class="id" title="var">RFm</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> (<a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>))%<span class="id" title="var">type</span>) <span class="id" title="var">RFp</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_program"><span class="id" title="method">make_program</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_le"><span class="id" title="definition">module_layer_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_le"><span class="id" title="definition">program_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">RFm</span> <span class="id" title="var">RFp</span> <span class="id" title="var">HRF</span> <span class="id" title="var">HRFerr</span> <span class="id" title="var">ML1</span> <span class="id" title="var">ML2</span> <span class="id" title="var">HML</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="liblayers.compcertx.CompcertStructures.html#program_le"><span class="id" title="definition">program_le</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_monotonic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="make_globalenv_le"><span class="id" title="instance">make_globalenv_le</span></a> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="class">MakeProgram</span></a>} `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#ProgramFormat"><span class="id" title="class">ProgramFormat</span></a>} {<span class="id" title="var">D1</span> <span class="id" title="var">D2</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">RFm</span>: <a class="idref" href="compcert.common.AST.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> (<a class="idref" href="coqrel.RelDefinitions.html#rel"><span class="id" title="definition">rel</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#Fm"><span class="id" title="variable">Fm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#primsem"><span class="id" title="variable">primsem</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a>))%<span class="id" title="var">type</span>} {<span class="id" title="var">RFp</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#HasImage"><span class="id" title="class">HasImage</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#match_fundef"><span class="id" title="definition">match_fundef</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a> (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_fundef"><span class="id" title="definition">make_fundef</span></a> <span class="id" title="var">_</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a> <a class="idref" href="coqrel.RelOperators.html#22d5c754b43f74bbc26a31adf4b8647c"><span class="id" title="notation">@@</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#isError"><span class="id" title="definition">isError</span></a>)},<br/>
&nbsp;&nbsp;<a class="idref" href="coqrel.RelDefinitions.html#Monotonic"><span class="id" title="abbreviation">Monotonic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#module_layer_le"><span class="id" title="definition">module_layer_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D1"><span class="id" title="variable">D1</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFm"><span class="id" title="variable">RFm</span></a> <a class="idref" href="coqrel.RelDefinitions.html#d5d0ad6beccd25d5224442d64ed307d5"><span class="id" title="notation">++&gt;</span></a> <a class="idref" href="liblayers.compcertx.ErrorMonad.html#res_le"><span class="id" title="inductive">res_le</span></a> (<a class="idref" href="liblayers.compcertx.CompcertStructures.html#genv_le"><span class="id" title="definition">genv_le</span></a> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#RFp"><span class="id" title="variable">RFp</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#make_globalenv"><span class="id" title="definition">make_globalenv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">rauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>