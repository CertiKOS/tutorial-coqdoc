<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>tutorial.queue.AbsQueue</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library tutorial.queue.AbsQueue</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab631"></a><h1 class="section">AbsQueue.v</h1>

 *
<a name="lab632"></a><h1 class="section">Abstract queue representation.</h1>

 
<div class="paragraph"> </div>

 Compcert helper lib 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Coqlib.html#"><span class="id" title="library">Coqlib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Maps.html#"><span class="id" title="library">Maps</span></a>.<br/>
</div>

<div class="doc">
Compcert types and semantics 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.AST.html#"><span class="id" title="library">AST</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.lib.Integers.html#"><span class="id" title="library">Integers</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Values.html#"><span class="id" title="library">Values</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Globalenvs.html#"><span class="id" title="library">Globalenvs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Clight.html#"><span class="id" title="library">Clight</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Ctypes.html#"><span class="id" title="library">Ctypes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.cfrontend.Cop.html#"><span class="id" title="library">Cop</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="compcert.common.Smallstep.html#"><span class="id" title="library">Smallstep</span></a>.<br/>
</div>

<div class="doc">
CertiKOS layer library 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.Semantics.html#"><span class="id" title="library">Semantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.Structures.html#"><span class="id" title="library">Structures</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.GenSem.html#"><span class="id" title="library">GenSem</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.CGenSem.html#"><span class="id" title="library">CGenSem</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.CPrimitives.html#"><span class="id" title="library">CPrimitives</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.SimulationRelation.html#"><span class="id" title="library">SimulationRelation</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#"><span class="id" title="library">SimrelInvariant</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.logic.LayerLogicImpl.html#"><span class="id" title="library">LayerLogicImpl</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.ClightModules.html#"><span class="id" title="library">ClightModules</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#"><span class="id" title="library">ClightXSemantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#"><span class="id" title="library">MakeProgramSpec</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.AbstractData.html#"><span class="id" title="library">AbstractData</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#"><span class="id" title="library">AbstractionRelation</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Tactics.html#"><span class="id" title="library">Coq.Program.Tactics</span></a>. 
<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.common.TutoLib.html#"><span class="id" title="library">TutoLib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.queue.QueueData.html#"><span class="id" title="library">QueueData</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="tutorial.queue.Queue.html#"><span class="id" title="library">Queue</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
</div>

<div class="doc">
In the previous layer (Queue.v), the specification we gave for the
    queue primitives were abstracted to Coq datatypes, but it still
    followed the C implementation closely. We had a set of the nodes
    with next- and prev-indices, but the specification did not
    directly express that the nodes represent an ordered queue, and
    the specification for the primitives were in terms of operations
    like <span class="inlinecode"><span class="id" title="keyword">if</span></span> <span class="inlinecode"><a class="idref" href="liblayers.lib.Decision.html#decide"><span class="id" title="projection">decide</span></a></span> <span class="inlinecode">(<a class="idref" href="compcert.lib.Coqlib.html#tl"><span class="id" title="variable">tl</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>)</span> <span class="inlinecode">...</span>  which have no intuitive
    meaning.

<div class="paragraph"> </div>

    In this file we abstract the linked list queue representation to a
    Coq <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span>.

<div class="paragraph"> </div>

    Unlike the other layers up to this point, this layer is purely a
    refinement; we add no additional code. We only have to define the
    relation between the representations, give the specifications for
    <span class="inlinecode"><a class="idref" href="tutorial.queue.Queue.html#enqueue"><span class="id" title="definition">enqueue</span></a></span> and <span class="inlinecode"><a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a></span> on the high level queue, and then prove
    the refinement relation.  
<div class="paragraph"> </div>

 This is a more advanced example than stack or container meant
  for people who want to get more experience with implementing a layer.
  The assignment is to implement the <span class="inlinecode"><span class="id" title="var">abs_enqueue</span></span> primitive. Almost all of the
  releveant definitions and proofs are left empty aside from some hints in
  comments. If you get stuck, you can try referring to the corresponding
  definition for <span class="inlinecode"><span class="id" title="var">abs_dequeue</span></span>, although they are some places where they differ
  significantly. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="AbsQueue"><span class="id" title="section">AbsQueue</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Hmem</span>: <a class="idref" href="liblayers.simrel.MemWithData.html#BaseMemoryModel"><span class="id" title="class">BaseMemoryModel</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="liblayers.compcertx.MakeProgramSpec.html#MakeProgram"><span class="id" title="class">MakeProgramSpec.MakeProgram</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab633"></a><h2 class="section">Abstract Data</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AbsQueue.AbsData"><span class="id" title="section">AbsData</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="abs_queue_inv"><span class="id" title="record">abs_queue_inv</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="tutorial.queue.QueueData.html#abs_data"><span class="id" title="record">abs_data</span></a>) : <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="npool_valid"><span class="id" title="projection">npool_valid</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">node</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#node_valid"><span class="id" title="inductive">node_valid</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="npool_range"><span class="id" title="projection">npool_range</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">node</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#NodeUndef"><span class="id" title="constructor">NodeUndef</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="preinit_q"><span class="id" title="projection">preinit_q</span></a>: <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#queue"><span class="id" title="projection">queue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#QueueUndef"><span class="id" title="constructor">QueueUndef</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="q_valid"><span class="id" title="projection">q_valid</span></a>: <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#queue_valid"><span class="id" title="inductive">queue_valid</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#queue"><span class="id" title="projection">queue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="inQ_valid"><span class="id" title="projection">inQ_valid</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">node</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#In_Q_inQ"><span class="id" title="inductive">In_Q_inQ</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#aqueue"><span class="id" title="projection">aqueue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#anpool"><span class="id" title="projection">anpool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="abs_q_unique"><span class="id" title="projection">abs_q_unique</span></a>: <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#abs_queue_unique"><span class="id" title="inductive">abs_queue_unique</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#aqueue"><span class="id" title="projection">aqueue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#d"><span class="id" title="variable">d</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="abs_queue_data_ops"><span class="id" title="instance">abs_queue_data_ops</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#AbstractDataOps"><span class="id" title="class">AbstractDataOps</span></a> <a class="idref" href="tutorial.queue.QueueData.html#abs_data"><span class="id" title="record">abs_data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">init_data</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">abs_data_init</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">data_inv</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">abs_queue_inv</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">data_inject</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">:=</span></a> <span class="id" title="keyword">fun</span> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">_</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">⇒</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#Build_AbstractDataOps"><span class="id" title="constructor">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="abs_queue_data_data"><span class="id" title="instance">abs_queue_data_data</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#AbstractData"><span class="id" title="class">AbstractData</span></a> <a class="idref" href="tutorial.queue.QueueData.html#abs_data"><span class="id" title="record">abs_data</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gi"><span class="id" title="lemma">ZMap.gi</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> : <a class="idref" href="liblayers.simrel.AbstractData.html#layerdata"><span class="id" title="record">layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_type</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">abs_data</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_ops</span></a>  <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">abs_queue_data_ops</span></a><a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">ldata_prf</span></a>  <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractData.html#ldata"><span class="id" title="constructor">abs_queue_data_data</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.AbsData"><span class="id" title="section">AbsData</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab634"></a><h2 class="section">High Level Specifications</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AbsQueue.HighSpec"><span class="id" title="section">HighSpec</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now we can define the specifications for the <span class="inlinecode"><a class="idref" href="tutorial.queue.Queue.html#enqueue"><span class="id" title="definition">enqueue</span></a></span> and
        <span class="inlinecode"><a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a></span> primitives.  These are simpler and more intuitive than
        the low-level specification.

<div class="paragraph"> </div>

        For enqueue, the preconditions now are that the queue is
        initialized, the node index is in range, and the node we are
        trying to insert is not already in the list (the ``inQ'' flag
        is ``false''.

<div class="paragraph"> </div>

        When these conditions are true we update the state simply by
        prepending the node index to the list (node :: q), and setting
        ``inQ'' to ``true''.

<div class="paragraph"> </div>

        The abstract representation of the queue is backwards, with the tail of
        the queue being stored at the head of the list. 
<div class="paragraph"> </div>

 TUTORIAL: Fill in the high level spec using the informal description
      above as guidance. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_enqueue_high_spec"><span class="id" title="definition">abs_enqueue_high_spec</span></a> (<span class="id" title="var">node</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_enqueue_high_sem"><span class="id" title="definition">abs_enqueue_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <span class="id" title="var">_</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_enqueue_high_spec"><span class="id" title="definition">abs_enqueue_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="abs_enqueue_pres_inv"><span class="id" title="instance">abs_enqueue_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_enqueue_high_spec"><span class="id" title="definition">abs_enqueue_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
For <span class="inlinecode"><a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a></span>, the precondition is that the layer is initialized
       and the list is nonempty, and the effect of the call is to
       delete the last item in it (List.remove zeq hd (tl :: q)).
       It is slightly more complicated due to the more limited
       set of tools for working with the end of a <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span>.
     
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_dequeue_high_spec"><span class="id" title="definition">abs_dequeue_high_spec</span></a> (<span class="id" title="var">abs</span>: <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">match</span> <a class="idref" href="tutorial.queue.QueueData.html#aqueue"><span class="id" title="projection">aqueue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="tutorial.queue.QueueData.html#AbsQueue"><span class="id" title="constructor">AbsQueue</span></a> (<span class="id" title="var">tl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hd</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q</span> <span class="id" title="var">tl</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#anpool"><span class="id" title="projection">anpool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="tutorial.queue.QueueData.html#AbsNode"><span class="id" title="constructor">AbsNode</span></a> <span class="id" title="var">dat</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="tutorial.queue.QueueData.html#AbsNode"><span class="id" title="constructor">AbsNode</span></a> <span class="id" title="var">dat</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a> <a class="idref" href="tutorial.queue.QueueData.html#63127fbf40e7f937f2c9f80bee17acbd"><span class="id" title="notation">{</span></a><a class="idref" href="tutorial.queue.QueueData.html#63127fbf40e7f937f2c9f80bee17acbd"><span class="id" title="notation">aqueue</span></a><a class="idref" href="tutorial.queue.QueueData.html#63127fbf40e7f937f2c9f80bee17acbd"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.queue.QueueData.html#AbsQueue"><span class="id" title="constructor">AbsQueue</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove"><span class="id" title="definition">List.remove</span></a> <a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> (<span class="id" title="var">tl</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>))<a class="idref" href="tutorial.queue.QueueData.html#63127fbf40e7f937f2c9f80bee17acbd"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#059ad544fe3b90b631fbc9d3857c6bd3"><span class="id" title="notation">{</span></a><a class="idref" href="tutorial.queue.QueueData.html#059ad544fe3b90b631fbc9d3857c6bd3"><span class="id" title="notation">anpool</span></a><a class="idref" href="tutorial.queue.QueueData.html#059ad544fe3b90b631fbc9d3857c6bd3"><span class="id" title="notation">:</span></a> <a class="idref" href="compcert.lib.Maps.html#ZMap.set"><span class="id" title="definition">ZMap.set</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#anpool"><span class="id" title="projection">anpool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a>)<a class="idref" href="tutorial.queue.QueueData.html#059ad544fe3b90b631fbc9d3857c6bd3"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_dequeue_high_sem"><span class="id" title="definition">abs_dequeue_high_sem</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#cprimitive"><span class="id" title="record">cprimitive</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#cgensem"><span class="id" title="definition">cgensem</span></a> <span class="id" title="var">_</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_spec"><span class="id" title="definition">abs_dequeue_high_spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="abs_dequeue_pres_inv"><span class="id" title="instance">abs_dequeue_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.compcertx.CGenSem.html#GenSemPreservesInvariant"><span class="id" title="class">GenSemPreservesInvariant</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_spec"><span class="id" title="definition">abs_dequeue_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? <span class="id" title="var">Hsem</span> ? <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">Hsem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_spec"><span class="id" title="definition">abs_dequeue_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 5 (<span class="id" title="var">destr_in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnin</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">z0</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">inv</span> <span class="id" title="var">abs_q_unique0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">z0</span> (<span class="id" title="var">z0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#zeq_true"><span class="id" title="lemma">zeq_true</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#count_occ_not_In"><span class="id" title="lemma">count_occ_not_In</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- </div>

<div class="doc">
In_Q_inQ 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_eq</span> <span class="id" title="var">node</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">z0</span>); [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; [<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>; <span class="id" title="tactic">auto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">discriminate</span> |]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">z0</span>) <span class="id" title="var">z0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove_In"><span class="id" title="lemma">remove_In</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove_In"><span class="id" title="lemma">remove_In</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">inQ_valid0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; [<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">eauto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">z0</span>) <span class="id" title="var">z0</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">Heq</span> | ?<span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_nin"><span class="id" title="lemma">remove_nin</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; [<span class="id" title="tactic">congruence</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">destr_eq</span> <span class="id" title="var">z0</span> <span class="id" title="var">node</span>; [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; [<span class="id" title="tactic">congruence</span> |]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_neq"><span class="id" title="lemma">remove_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; [<span class="id" title="tactic">congruence</span> |]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_neq"><span class="id" title="lemma">remove_neq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- </div>

<div class="doc">
abs_queue_unique 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abs_q_unique0</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">z0</span>) <span class="id" title="var">z0</span>) <span class="id" title="keyword">as</span> [?<span class="id" title="var">Heq</span> | ?<span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">z0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove_In"><span class="id" title="lemma">remove_In</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#count_occ_remove_neq"><span class="id" title="lemma">count_occ_remove_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_neq"><span class="id" title="lemma">remove_neq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">x</span> (<span class="id" title="var">z0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#count_occ_cons_neq"><span class="id" title="lemma">count_occ_cons_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">destr_eq</span> <span class="id" title="var">x</span> <span class="id" title="var">z0</span>; [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#zeq_true"><span class="id" title="lemma">zeq_true</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#count_occ_not_In"><span class="id" title="lemma">count_occ_not_In</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_neq"><span class="id" title="lemma">remove_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#zeq_false"><span class="id" title="lemma">zeq_false</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>; [<span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">z0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove_In"><span class="id" title="lemma">remove_In</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_neq"><span class="id" title="lemma">remove_neq</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">x</span> (<span class="id" title="var">z0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#count_occ_remove_neq"><span class="id" title="lemma">count_occ_remove_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#count_occ_cons_neq"><span class="id" title="lemma">count_occ_cons_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.HighSpec"><span class="id" title="section">HighSpec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab635"></a><h2 class="section">Layer Relation</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AbsQueue.LowHighSpecRel"><span class="id" title="section">LowHighSpecRel</span></a>.<br/>

<br/>
</div>

<div class="doc">
Having defined the high-level specification, we now turn to
        the refinement proofs, beginning by defining the refinement
        relations.

<div class="paragraph"> </div>

        This layer is a pure refinement between abstract states, so
        the C memory plays no role, and we can use a trivial
        always-true relation <span class="inlinecode"><a class="idref" href="tutorial.stack.Counter.html#match_data"><span class="id" title="inductive">match_data</span></a></span>.  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="match_data"><span class="id" title="inductive">match_data</span></a> : <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="liblayers.simrel.MemWithData.html#mem"><span class="id" title="method">mem</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="match_data_intro"><span class="id" title="constructor">match_data_intro</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">abs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_data"><span class="id" title="inductive">match_data</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs"><span class="id" title="variable">abs</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#m"><span class="id" title="variable">m</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="tutorial.queue.AbsQueue.html#relate_npool"><span class="id" title="inductive">relate_npool</span></a></span> relates the high and low level node pools. It ensures
      that the <span class="inlinecode"><a class="idref" href="liblayers.compcertx.GenSem.html#data"><span class="id" title="variable">data</span></a></span> field matches between the two node representations. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="relate_npool"><span class="id" title="inductive">relate_npool</span></a> : <a class="idref" href="tutorial.queue.QueueData.html#abs_node_pool"><span class="id" title="definition">abs_node_pool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#node_pool"><span class="id" title="definition">node_pool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="relate_node_undef"><span class="id" title="constructor">relate_node_undef</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#relate_npool"><span class="id" title="inductive">relate_npool</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.init"><span class="id" title="definition">ZMap.init</span></a> <a class="idref" href="tutorial.queue.QueueData.html#AbsNodeUndef"><span class="id" title="constructor">AbsNodeUndef</span></a>) (<a class="idref" href="compcert.lib.Maps.html#ZMap.init"><span class="id" title="definition">ZMap.init</span></a> <a class="idref" href="tutorial.queue.QueueData.html#NodeUndef"><span class="id" title="constructor">NodeUndef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="relate_npool_intro"><span class="id" title="constructor">relate_npool_intro</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">anp</span> <span class="id" title="var">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">nd</span> <span class="id" title="var">inQ</span> <span class="id" title="var">dat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nd"><span class="id" title="variable">nd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nd"><span class="id" title="variable">nd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#anp"><span class="id" title="variable">anp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#AbsNode"><span class="id" title="constructor">AbsNode</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#dat"><span class="id" title="variable">dat</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#inQ"><span class="id" title="variable">inQ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">nxt</span> <span class="id" title="var">prv</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nd"><span class="id" title="variable">nd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#dat"><span class="id" title="variable">dat</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nxt"><span class="id" title="variable">nxt</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#prv"><span class="id" title="variable">prv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#relate_npool"><span class="id" title="inductive">relate_npool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#anp"><span class="id" title="variable">anp</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a>.<br/>

<br/>
</div>

<div class="doc">
The next component of the refinement relation is perhaps the
        most interesting part of the refinement proof---we need to
        specify what a valid doubly-linked list looks like when it
        represents a given abstract list. For example, consider an
        abstract list with three items:

<div class="paragraph"> </div>

          <span class="inlinecode">4</span> <span class="inlinecode">::</span> <span class="inlinecode">9</span> <span class="inlinecode">::</span> <span class="inlinecode">3</span> <span class="inlinecode">::</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a></span>.

<div class="paragraph"> </div>

        The corresponding doubly-linked list can be drawn graphically as:

<div class="paragraph"> </div>

<pre>&lt;
   tl=4 ----&gt; 4                     9                 3              &lt;---- hd=3
             +---------------+     +-----------+     +-----------------+
         X&lt;--|nxt=MAX_NODES  | &lt;---|nxt=4      | &lt;---|nxt=9            |
             |         prv=9 |---&gt; |     prv=3 |---&gt; |    prv=MAX_NODES|--&gt;X
             +---------------+     +-----------+     +-----------------+
</pre>
&gt;
        Note that we consider the tail to be the front of the list,
        and use MAX_NODES as the null value in the first and last
        items. The hd and tl fields of the low-level queue should
        therefore correspond to the first last item in the list.

<div class="paragraph"> </div>

        TUTORIAL (optional):
        At this point you may want to pause, and try yourself to write
        down a Coq predicate capturing when a node pool and hd/tl
        value correctly represent a list of integers. When you are
        done, you look at the definition we came up with,
        <span class="inlinecode"><a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a></span>.

<div class="paragraph"> </div>

        Clearly, there are many equivalent ways to phrase this in Coq
        (e.g., as a fixpoint or an inductive definition), and finding
        one that's convenient to reason about will make a lot of
        difference on the proof. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">q</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">hd</span> <span class="id" title="var">tl</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">next</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<span class="id" title="var">np</span>: <a class="idref" href="tutorial.queue.QueueData.html#node_pool"><span class="id" title="definition">node_pool</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">dat</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <span class="id" title="var">n</span> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#dat"><span class="id" title="variable">dat</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">dat</span> <span class="id" title="var">prv</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <span class="id" title="var">n</span> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#dat"><span class="id" title="variable">dat</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#prv"><span class="id" title="variable">prv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <span class="id" title="var">q'</span> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#prv"><span class="id" title="variable">prv</span></a> <span class="id" title="var">n</span> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="relate_queue"><span class="id" title="inductive">relate_queue</span></a> : <a class="idref" href="tutorial.queue.QueueData.html#abs_queue"><span class="id" title="inductive">abs_queue</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#queue_low"><span class="id" title="inductive">queue_low</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.QueueData.html#node_pool"><span class="id" title="definition">node_pool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="relate_queue_undef"><span class="id" title="constructor">relate_queue_undef</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#relate_queue"><span class="id" title="inductive">relate_queue</span></a> <a class="idref" href="tutorial.queue.QueueData.html#AbsQueueUndef"><span class="id" title="constructor">AbsQueueUndef</span></a> <a class="idref" href="tutorial.queue.QueueData.html#QueueUndef"><span class="id" title="constructor">QueueUndef</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.init"><span class="id" title="definition">ZMap.init</span></a> <a class="idref" href="tutorial.queue.QueueData.html#NodeUndef"><span class="id" title="constructor">NodeUndef</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="relate_queue_intro"><span class="id" title="constructor">relate_queue_intro</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#relate_queue"><span class="id" title="inductive">relate_queue</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#AbsQueue"><span class="id" title="constructor">AbsQueue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a>) (<a class="idref" href="tutorial.queue.QueueData.html#Queue"><span class="id" title="constructor">Queue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="relate_data"><span class="id" title="record">relate_data</span></a> (<span class="id" title="var">hadt</span>: <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a>) (<span class="id" title="var">ladt</span>: <a class="idref" href="tutorial.queue.Queue.html#queue_layerdata"><span class="id" title="definition">queue_layerdata</span></a>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="init_rel"><span class="id" title="projection">init_rel</span></a>: <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hadt"><span class="id" title="variable">hadt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#init_flag"><span class="id" title="projection">init_flag</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#ladt"><span class="id" title="variable">ladt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="npool_rel"><span class="id" title="projection">npool_rel</span></a>: <a class="idref" href="tutorial.queue.AbsQueue.html#relate_npool"><span class="id" title="inductive">relate_npool</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#anpool"><span class="id" title="projection">anpool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hadt"><span class="id" title="variable">hadt</span></a>) (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#ladt"><span class="id" title="variable">ladt</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="queue_rel"><span class="id" title="projection">queue_rel</span></a>: <a class="idref" href="tutorial.queue.AbsQueue.html#relate_queue"><span class="id" title="inductive">relate_queue</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#aqueue"><span class="id" title="projection">aqueue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hadt"><span class="id" title="variable">hadt</span></a>) (<a class="idref" href="tutorial.queue.QueueData.html#queue"><span class="id" title="projection">queue</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#ladt"><span class="id" title="variable">ladt</span></a>) (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#ladt"><span class="id" title="variable">ladt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abrel_components_abs_queue_queue"><span class="id" title="definition">abrel_components_abs_queue_queue</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel_components"><span class="id" title="record">abrel_components</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_layerdata"><span class="id" title="definition">queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_relate</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">relate_data</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_match</span></a>  <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">match_data</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">abrel_new_glbl</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel_components"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="rel_ops"><span class="id" title="instance">rel_ops</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#AbstractionRelation"><span class="id" title="class">AbstractionRelation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abrel_components_abs_queue_queue"><span class="id" title="definition">abrel_components_abs_queue_queue</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abrel_abs_queue_queue"><span class="id" title="definition">abrel_abs_queue_queue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel"><span class="id" title="record">abrel</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_layerdata"><span class="id" title="definition">queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_ops</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_components_abs_queue_queue</span></a><a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">abrel_prf</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">:=</span></a> <a class="idref" href="liblayers.simrel.AbstractionRelation.html#Build_abrel"><span class="id" title="constructor">rel_ops</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> : <a class="idref" href="liblayers.simrel.SimrelDefinition.html#simrel"><span class="id" title="record">simrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.simrel.AbstractionRelation.html#abrel_simrel"><span class="id" title="definition">abrel_simrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abrel_abs_queue_queue"><span class="id" title="definition">abrel_abs_queue_queue</span></a>.<br/>

<br/>
</div>

<div class="doc">
Some additional properties about <span class="inlinecode"><a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="match_nxt_prv_not_in"><span class="id" title="lemma">match_nxt_prv_not_in</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">next</span> <span class="id" title="var">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">nd</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nd"><span class="id" title="variable">nd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">node</span>, <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.set"><span class="id" title="definition">ZMap.set</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nd"><span class="id" title="variable">nd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#node"><span class="id" title="variable">node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_eq</span> <span class="id" title="var">a</span> <span class="id" title="var">nd</span>; [<span class="id" title="tactic">tauto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ? &amp; ?); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_eq</span> <span class="id" title="var">a</span> <span class="id" title="var">nd</span>; [<span class="id" title="tactic">tauto</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">esplit</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="match_nxt_prv__last"><span class="id" title="lemma">match_nxt_prv__last</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">next</span> <span class="id" title="var">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">dat</span> [<span class="id" title="var">prv</span> [? ?]]]]; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHq</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="match_nxt_prv_Def"><span class="id" title="lemma">match_nxt_prv_Def</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">next</span> <span class="id" title="var">np</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="tutorial.queue.QueueData.html#NodeUndef"><span class="id" title="constructor">NodeUndef</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [? [? [? ?]]]; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="match_nxt_prv_inv"><span class="id" title="lemma">match_nxt_prv_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">np</span> <span class="id" title="var">q</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">tail</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tail"><span class="id" title="variable">tail</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">dat</span> [<span class="id" title="var">prv</span> [? [? ?]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">reflexivity</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="match_nxt_prv_remove"><span class="id" title="lemma">match_nxt_prv_remove</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">np</span> <span class="id" title="var">x</span> <span class="id" title="var">xd</span> <span class="id" title="var">xn</span> <span class="id" title="var">xp</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xd"><span class="id" title="variable">xd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xn"><span class="id" title="variable">xn</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xp"><span class="id" title="variable">xp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">q</span> <span class="id" title="var">tl</span> <span class="id" title="var">next</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#next"><span class="id" title="variable">next</span></a> (<a class="idref" href="compcert.lib.Maps.html#ZMap.set"><span class="id" title="definition">ZMap.set</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xd"><span class="id" title="variable">xd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xn"><span class="id" title="variable">xn</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> ? ? ? [? [? [? [? [? [? [? ?]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">xd</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">HNIn</span> <span class="id" title="var">Hmatch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HNIn'</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HNIn'</span> (<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_inv"><span class="id" title="lemma">match_nxt_prv_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">Hmatch</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">contradict</span> <span class="id" title="var">HNIn</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">HNIn</span> <span class="id" title="var">Hmatch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HNIn'</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">x</span> (<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HNIn'</span> (<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_inv"><span class="id" title="lemma">match_nxt_prv_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>  <span class="id" title="var">Hmatch</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmatch</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">adat</span> [<span class="id" title="var">aprv</span> [? ?]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">aprv</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">destruct</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>); <span class="id" title="var">destruct_conjs</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">adat</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">contradict</span> <span class="id" title="var">HNIn</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">exact</span> <span class="id" title="var">IHq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nxt_of_last"><span class="id" title="lemma">nxt_of_last</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> <span class="id" title="var">ys</span> <span class="id" title="var">hd</span>  <span class="id" title="var">np</span> <span class="id" title="var">dat</span> <span class="id" title="var">nxt</span> <span class="id" title="var">prv</span> <span class="id" title="var">xs</span> <span class="id" title="var">tl</span> <span class="id" title="var">tail</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<a class="idref" href="tutorial.queue.AbsQueue.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#ys"><span class="id" title="variable">ys</span></a>) <a class="idref" href="tutorial.queue.AbsQueue.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tail"><span class="id" title="variable">tail</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.lib.Maps.html#ZMap.get"><span class="id" title="definition">ZMap.get</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a>  <a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#dat"><span class="id" title="variable">dat</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#nxt"><span class="id" title="variable">nxt</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#prv"><span class="id" title="variable">prv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#nxt"><span class="id" title="variable">nxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#tail"><span class="id" title="variable">tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ys</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">destruct_conjs</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">x</span> <span class="id" title="var">xs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">ys</span>; <span class="id" title="var">destruct_conjs</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">tl</span> <span class="id" title="var">tail</span> <span class="id" title="var">Hmatch</span> <span class="id" title="var">Hget</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHxs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_inv"><span class="id" title="lemma">match_nxt_prv_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hmatch</span>) <span class="id" title="var">Hget</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span>) <span class="id" title="var">tail</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs</span>) <span class="id" title="var">tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="tutorial.queue.QueueData.html#last_nonempty_dummy"><span class="id" title="lemma">last_nonempty_dummy</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.LowHighSpecRel"><span class="id" title="section">LowHighSpecRel</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab636"></a><h2 class="section">Refinement Proofs</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AbsQueue.LowHighSpecSim"><span class="id" title="section">LowHighSpecSim</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ce</span>: <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#ClightCompositeEnv"><span class="id" title="class">ClightCompositeEnv</span></a>}.<br/>

<br/>
</div>

<div class="doc">
TUTORIAL: Fill in the refinement proof for <span class="inlinecode"><span class="id" title="var">abs_enqueue</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="abs_enqueue_refine"><span class="id" title="lemma">abs_enqueue_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.Queue.html#enqueue"><span class="id" title="definition">enqueue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.Queue.html#enqueue_high_sem"><span class="id" title="definition">enqueue_high_sem</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.Queue.html#enqueue"><span class="id" title="definition">enqueue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_enqueue_high_sem"><span class="id" title="definition">abs_enqueue_high_sem</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="abs_dequeue_refine"><span class="id" title="lemma">abs_dequeue_refine</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.Queue.html#dequeue_high_sem"><span class="id" title="definition">dequeue_high_sem</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_sem"><span class="id" title="definition">abs_dequeue_high_sem</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#Z.mul"><span class="id" title="definition">Z.mul</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">refine_proof_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">CStep</span>. <span class="id" title="var">inv_generic_sem</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse_hyps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">InvLo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">InvHi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">cprimitive_inv_init_state_data_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">MemRel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">abrel_match_mem_relate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES_range"><span class="id" title="lemma">MAX_NODES_range</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hmn_range</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_spec"><span class="id" title="definition">abs_dequeue_high_spec</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 5 (<span class="id" title="var">destr_in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqb</span> <span class="id" title="var">into</span> <span class="id" title="var">Hinit</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqa</span> <span class="id" title="var">into</span> <span class="id" title="var">Haqueue</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Heqa0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hahead</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">queue_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">npool_rel0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hahead</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gi"><span class="id" title="lemma">ZMap.gi</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hahead</span>. <span class="id" title="tactic">discriminate</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">z</span> <span class="id" title="var">into</span> <span class="id" title="var">head</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">z0</span> <span class="id" title="var">into</span> <span class="id" title="var">tail</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">l</span> <span class="id" title="var">into</span> <span class="id" title="var">q</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H3</span> <span class="id" title="var">into</span> <span class="id" title="var">Hlast</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hq_match</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hnode_match</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#tail"><span class="id" title="abbreviation">tail</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#tail"><span class="id" title="abbreviation">tail</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hneq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
last q tail = tail (queue = tail :: nil) 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnin</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">tail</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#unique_not_In"><span class="id" title="lemma">unique_not_In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">tail</span> <span class="id" title="var">q</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.queue.QueueData.html#last_nin_default"><span class="id" title="lemma">last_nin_default</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hlast</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq_match</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">hddat</span> &amp; <span class="id" title="var">Hhead</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hhead_range</span>: 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~~(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">npool_range0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hahead</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hahead</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hhead'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnode_match</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hhead'</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">Hhead'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hhead</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead'</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hhead'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.Queue.html#dequeue_high_spec"><span class="id" title="definition">dequeue_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">init_rel0</span>, &lt;- <span class="id" title="var">Hq</span>, <span class="id" title="var">Hhead</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>. <span class="id" title="var">destr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned_repr"><span class="id" title="lemma">Int.unsigned_repr</span></a>; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="var">cbn</span>; <span class="id" title="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Integers.html#Int.repr_unsigned"><span class="id" title="lemma">Int.repr_unsigned</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> ? ? ? ? <span class="id" title="var">Hnd</span>. <span class="id" title="var">destr_eq</span> <span class="id" title="var">nd</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>); [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnd</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hnd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
last q tail &lt;&gt; tail (queue = tail :: tailprev :: queue') 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">nd</span> ?]; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span>; [<span class="id" title="var">contradiction</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq_match</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">tldat</span> &amp; <span class="id" title="var">tlprv</span> &amp; <span class="id" title="var">Htail</span> &amp; <span class="id" title="var">Hq_match</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htail_range</span>: 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~~(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">npool_range0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">tlprv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
by Hq_match 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq_match</span> <span class="id" title="keyword">as</span> [? [? ?]]; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
if q = nil, tlprv = head, otherwise hd = last q = head 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">nd</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">tail</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="tutorial.queue.QueueData.html#last_nonempty_dummy"><span class="id" title="lemma">last_nonempty_dummy</span></a> <span class="id" title="var">hd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span>  (<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv__last"><span class="id" title="lemma">match_nxt_prv__last</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">tlprv</span> <span class="id" title="var">tail</span> (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlast</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#last_In"><span class="id" title="lemma">last_In</span></a> <span class="id" title="var">tail</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">HIn</span> | <span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlast</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hhead_Def</span> := <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_Def"><span class="id" title="lemma">match_nxt_prv_Def</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HIn</span> <span class="id" title="var">Hq_match</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">npool_range0</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~~(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">npool_range0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">init_rel0</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">q_valid0</span> <span class="id" title="var">init_rel0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">q_valid0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hq</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">inv</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hhead_range</span>: 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hhead_range</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hhead_range'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">npool_valid0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead_range'</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hhead_range'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhead</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#tail_last"><span class="id" title="lemma">tail_last</span></a> <span class="id" title="var">tail</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)) <span class="id" title="keyword">as</span> [? | [<span class="id" title="var">q'</span> <span class="id" title="var">Hq'</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnxt_tail</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <span class="id" title="var">tlprv</span> <span class="id" title="var">tail</span> (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> <span class="id" title="var">Hq_match</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq'</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt_tail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.queue.AbsQueue.html#nxt_of_last"><span class="id" title="lemma">nxt_of_last</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dat</span> := <span class="id" title="var">d</span>) (<span class="id" title="var">nxt</span> := <span class="id" title="var">nxt</span>) (<span class="id" title="var">prv</span> := <span class="id" title="var">prv</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt_tail</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">nxt</span> (<span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#last_In"><span class="id" title="lemma">last_In</span></a> <span class="id" title="var">tail</span> <span class="id" title="var">q'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin'</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">nxt</span> (<span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Coqlib.html#in_app"><span class="id" title="lemma">in_app</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hq_match'</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <span class="id" title="var">tlprv</span> <span class="id" title="var">tail</span> (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">exact</span> <span class="id" title="var">Hq_match</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq'</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hhead_Def</span> := <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_Def"><span class="id" title="lemma">match_nxt_prv_Def</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hq_match'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">npool_range0</span> <span class="id" title="var">nxt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~~(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">npool_range0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hrange</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnxt_range</span>: 0 <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">≤</span></a> <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.ZArith.BinInt.html#cb2fd1306e4fe5d333fd9fb7e2c4a1d2"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">npool_valid0</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt_range</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hnxt_range</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H6</span> <span class="id" title="var">into</span> <span class="id" title="var">Hnxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.Queue.html#dequeue_high_spec"><span class="id" title="definition">dequeue_high_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">init_rel0</span>, &lt;- <span class="id" title="var">Hq</span>, &lt;- <span class="id" title="var">Hhead</span>, &lt;- <span class="id" title="var">Hnxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">nd</span> ? ? <span class="id" title="var">Hnd_range</span> <span class="id" title="var">Hand</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_eq</span> <span class="id" title="var">nd</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>); [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hand</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hand</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnode_match</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hahead</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hahead</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">Hahead'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hahead'</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hhead</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hand</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnode_match</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hand</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hand</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">Hand</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr_eq</span> <span class="id" title="var">nd</span> <span class="id" title="var">nxt</span>; [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hand</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hnxt</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <span class="id" title="var">tlprv</span>); [<span class="id" title="tactic">subst</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× </div>

<div class="doc">
queue = tail :: head :: nil 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
using that
                     last (Int.unsigned head :: q) tail = Int.unsigned head 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tail</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">abs_q_unique0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#unique_not_In"><span class="id" title="lemma">unique_not_In</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">tail</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">tail</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.queue.QueueData.html#last_nin_default"><span class="id" title="lemma">last_nin_default</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) (<span class="id" title="var">y</span> := <span class="id" title="var">tail</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq_match</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">tail</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htail</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hnxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× </div>

<div class="doc">
queue = tail :: tailprv :: queue' ++ (head :: nil) 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hq_match_reshuffle</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tlprv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hq_match_reshuffle</span> <span class="id" title="var">into</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hqtail</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">q'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#q'"><span class="id" title="variable">q'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#tail_last"><span class="id" title="lemma">tail_last</span></a> <span class="id" title="var">tail</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q</span>)) <span class="id" title="keyword">as</span> [? | [<span class="id" title="var">q'</span> <span class="id" title="var">Hq'</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlast</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hqtail</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">q'</span> &amp; <span class="id" title="var">Hqtail</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlast_q'</span>: <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>  <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hlast_q'</span> := <a class="idref" href="tutorial.queue.AbsQueue.html#nxt_of_last"><span class="id" title="lemma">nxt_of_last</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq_match</span> <span class="id" title="var">Hhead</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="tutorial.queue.QueueData.html#last_nonempty_dummy"><span class="id" title="lemma">last_nonempty_dummy</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>)) <span class="id" title="keyword">in</span> <span class="id" title="var">Hlast_q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hlast_q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">nxt</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlast_q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#last_In"><span class="id" title="lemma">last_In</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">congruence</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">nxt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </div>

<div class="doc">
by abs_q_unique 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#unique_not_In"><span class="id" title="lemma">unique_not_In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">tail</span> <span class="id" title="var">_</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcontra</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HNIn_head</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">abs_q_unique0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#unique_not_In"><span class="id" title="lemma">unique_not_In</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">esplit</span>; <span class="id" title="var">esplit</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hq'</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#remove"><span class="id" title="definition">List.remove</span></a> <a class="idref" href="compcert.lib.Coqlib.html#zeq"><span class="id" title="definition">zeq</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) (<span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#remove_last"><span class="id" title="lemma">remove_last</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hq_match_reshuffle</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tlprv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hq_match_reshuffle</span> <span class="id" title="var">into</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#tail_last"><span class="id" title="lemma">tail_last</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <span class="id" title="var">q'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hq''</span> | [<span class="id" title="var">q''</span> <span class="id" title="var">Hq''</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hq_match</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">tlprvdat</span> &amp; <span class="id" title="var">tlprvprv</span> &amp; <span class="id" title="var">Htlprv</span> &amp; <span class="id" title="var">_</span> &amp; ? &amp; ? &amp; <span class="id" title="var">Hhead'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hhead</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhead'</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hhead'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htlprv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hnxt</span>; <span class="id" title="var">inv</span> <span class="id" title="var">Hnxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gso"><span class="id" title="lemma">ZMap.gso</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="compcert.lib.Maps.html#ZMap.gss"><span class="id" title="lemma">ZMap.gss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq''</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">q''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q'</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">q''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q'</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">Hq_match</span> <span class="id" title="tactic">by</span>  (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv"><span class="id" title="definition">match_nxt_prv</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nxt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tlprv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.lib.Maps.html#ZMap.set"><span class="id" title="definition">ZMap.set</span></a> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) (<a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">d</span> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="compcert.lib.Maps.html#ZMap.set"><span class="id" title="definition">ZMap.set</span></a> <span class="id" title="var">nxt</span> (<a class="idref" href="tutorial.queue.QueueData.html#Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">d0</span> <span class="id" title="var">nxt0</span> <a class="idref" href="tutorial.queue.QueueData.html#MAX_NODES"><span class="id" title="definition">MAX_NODES</span></a>) (<a class="idref" href="tutorial.queue.QueueData.html#npool"><span class="id" title="projection">npool</span></a> <span class="id" title="var">yd</span>)))) ; [(<span class="id" title="tactic">intros</span> <span class="id" title="var">blah</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">blah</span>) | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q'</span>) (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q'</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">Hlast_q'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq''</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q'</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">q'</span> (<a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="tutorial.queue.QueueData.html#app_last"><span class="id" title="lemma">app_last</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlast_q'</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hlast_q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HNIn_nxt</span>:  <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">nxt</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq''</span> <span class="id" title="keyword">in</span> <span class="id" title="var">abs_q_unique0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">abs_q_unique0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tail</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a>  <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <span class="id" title="var">abs_q_unique0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="tutorial.queue.QueueData.html#unique_not_In"><span class="id" title="lemma">unique_not_In</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">abs_q_unique0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_not_in"><span class="id" title="lemma">match_nxt_prv_not_in</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hq''</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><span class="id" title="var">tlprv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">q''</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">nxt</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="tutorial.queue.AbsQueue.html#match_nxt_prv_remove"><span class="id" title="lemma">match_nxt_prv_remove</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">xp</span> := <span class="id" title="var">prv0</span>) (<span class="id" title="var">y</span> := <a class="idref" href="compcert.lib.Integers.html#Int.unsigned"><span class="id" title="definition">Int.unsigned</span></a> <span class="id" title="var">head</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">HNIn_nxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.LowHighSpecSim"><span class="id" title="section">LowHighSpecSim</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab637"></a><h2 class="section">Linking</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="AbsQueue.Linking"><span class="id" title="section">Linking</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">ce</span>: <a class="idref" href="liblayers.compcertx.ClightXSemantics.html#ClightCompositeEnv"><span class="id" title="class">ClightCompositeEnv</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="AbsQueue.Linking.Hce"><span class="id" title="variable">Hce</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="compcert.cfrontend.Ctypes.html#build_composite_env"><span class="id" title="definition">build_composite_env</span></a> (<a class="idref" href="tutorial.queue.QueueData.html#node_t_comp"><span class="id" title="definition">node_t_comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="tutorial.queue.QueueData.html#queue_t_comp"><span class="id" title="definition">queue_t_comp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="compcert.common.Errors.html#OK"><span class="id" title="constructor">OK</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.Linking.ce"><span class="id" title="variable">ce</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="abs_queue_L"><span class="id" title="definition">abs_queue_L</span></a> : <a class="idref" href="liblayers.compcertx.CPrimitives.html#clayer"><span class="id" title="abbreviation">clayer</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_layerdata"><span class="id" title="definition">abs_queue_layerdata</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.Queue.html#enqueue"><span class="id" title="definition">enqueue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_enqueue_high_sem"><span class="id" title="definition">abs_enqueue_high_sem</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.queue.Queue.html#dequeue"><span class="id" title="definition">dequeue</span></a> <a class="idref" href="liblayers.logic.Structures.html#33228780c4c171a6131f9e6e62ea2dd4"><span class="id" title="notation">↦</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_dequeue_high_sem"><span class="id" title="definition">abs_dequeue_high_sem</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">abs_enqueue_refine</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">abs_dequeue_refine</span> : <span class="id" title="var">linking</span>.<br/>

<br/>
</div>

<div class="doc">
We only need to use the <span class="inlinecode"><span class="id" title="var">link_solve_refine</span></span> tactic since there is no
      intermediate spec. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="abs_queue_link"><span class="id" title="lemma">abs_queue_link</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.Queue.html#queue_L"><span class="id" title="definition">queue_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_L"><span class="id" title="definition">abs_queue_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.Queue.html#queue_L"><span class="id" title="definition">queue_L</span></a>. <span class="id" title="var">link_solve_refine</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="abs_queue_pres_inv"><span class="id" title="lemma">abs_queue_pres_inv</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Layers.html#ForallPrimitive"><span class="id" title="class">ForallPrimitive</span></a> <span class="id" title="var">_</span> (<a class="idref" href="liblayers.compcertx.CPrimitives.html#CPrimitivePreservesInvariant"><span class="id" title="class">CPrimitivePreservesInvariant</span></a> <span class="id" title="var">_</span>) <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_L"><span class="id" title="definition">abs_queue_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_L"><span class="id" title="definition">abs_queue_L</span></a>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">queue_boot_link</span> <span class="id" title="var">abs_queue_link</span> : <span class="id" title="var">linking</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="queue_boot_link"><span class="id" title="lemma">queue_boot_link</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="tutorial.queue.QueueData.html#boot_L"><span class="id" title="definition">boot_L</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.QueueData.html#intro_R"><span class="id" title="definition">intro_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_R"><span class="id" title="definition">queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">,</span></a> <a class="idref" href="tutorial.queue.Queue.html#intro_M"><span class="id" title="definition">intro_M</span></a> <a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_M"><span class="id" title="definition">queue_M</span></a><a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#02b32b237357d2b6b54537b4da97c51a"><span class="id" title="notation">:</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_L"><span class="id" title="definition">abs_queue_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="liblayers.logic.Language.html#vdash_module_le"><span class="id" title="method">vdash_module_le</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.Queue.html#intro_M"><span class="id" title="definition">intro_M</span></a> <a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_M"><span class="id" title="definition">queue_M</span></a><a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="liblayers.logic.Structures.html#1bcfff782645e550303b44d1d50df7a5"><span class="id" title="notation">∅</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">constructor</span> | <span class="id" title="tactic">reflexivity</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="liblayers.logic.Language.html#vdash_rel_equiv"><span class="id" title="method">vdash_rel_equiv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">(</span></a><a class="idref" href="tutorial.queue.QueueData.html#intro_R"><span class="id" title="definition">intro_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.Queue.html#queue_R"><span class="id" title="definition">queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">)</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">(</span></a><a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="tutorial.queue.AbsQueue.html#abs_queue_R"><span class="id" title="definition">abs_queue_R</span></a> <a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">∘</span></a> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#inv"><span class="id" title="definition">inv</span></a><a class="idref" href="liblayers.logic.Structures.html#28309b4b31fc061cea0bf998329431b2"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="liblayers.logic.LayerData.html#cat_compose_assoc"><span class="id" title="method">cat_compose_assoc</span></a>. <span class="id" title="var">monotonicity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="liblayers.logic.LayerData.html#cat_compose_assoc"><span class="id" title="method">cat_compose_assoc</span></a>. <span class="id" title="var">monotonicity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="liblayers.logic.LayerData.html#cat_compose_assoc"><span class="id" title="method">cat_compose_assoc</span></a>. <span class="id" title="var">monotonicity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="liblayers.simrel.SimrelInvariant.html#simrel_compose_inv_inv"><span class="id" title="lemma">simrel_compose_inv_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="liblayers.logic.Language.html#vcomp_rule"><span class="id" title="method">vcomp_rule</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">linking</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue.Linking"><span class="id" title="section">Linking</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="tutorial.queue.AbsQueue.html#AbsQueue"><span class="id" title="section">AbsQueue</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>